module.exports=function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=130)}([function(t,e,n){"use strict";t.exports=n(1).config()},function(t,e){t.exports=require("auth0-extension-tools@1.3.2")},function(t,e){var n=t.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(45)("wks"),o=n(29),i=n(4).Symbol,u="function"==typeof i;(t.exports=function(t){return r[t]||(r[t]=u&&i[t]||(u?i:o)("Symbol."+t))}).store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=require("express@4.12.4")},function(t,e,n){var r=n(21);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){t.exports=!n(17)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(6),o=n(73),i=n(48),u=Object.defineProperty;e.f=n(7)?Object.defineProperty:function(t,e,n){if(r(t),e=i(e,!0),r(n),o)try{return u(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e){t.exports=require("lodash@4.8.2")},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r=n(8),o=n(27);t.exports=n(7)?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(74),o=n(40);t.exports=function(t){return r(o(t))}},function(t,e){t.exports=require("bluebird@3.4.6")},function(t,e,n){const r=n(115),o=n(58),i=n(108),u=n(114);t.exports.createServer=r.createServer,t.exports.urlHelpers=o,t.exports.middlewares=i,t.exports.routes=u},function(t,e,n){"use strict";var r=n(260);r.emitErrs=!0;var o=new r.Logger({transports:[new r.transports.Console({timestamp:!0,level:"debug",handleExceptions:!0,json:!1,colorize:!0})],exitOnError:!1});t.exports=o,t.exports.stream={write:function(t){o.info(t.replace(/\n$/,""))}}},function(t,e,n){var r=n(4),o=n(2),i=n(24),u=n(11),a=function(t,e,n){var s,c,f,l=t&a.F,d=t&a.G,p=t&a.S,h=t&a.P,v=t&a.B,g=t&a.W,m=d?o:o[e]||(o[e]={}),y=m.prototype,_=d?r:p?r[e]:(r[e]||{}).prototype;d&&(n=e);for(s in n)(c=!l&&_&&void 0!==_[s])&&s in m||(f=c?_[s]:n[s],m[s]=d&&"function"!=typeof _[s]?n[s]:v&&c?i(f,r):g&&_[s]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):h&&"function"==typeof f?i(Function.call,f):f,h&&((m.virtual||(m.virtual={}))[s]=f,t&a.R&&y&&!y[s]&&u(y,s,f)))};a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,t.exports=a},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports={}},function(t,e,n){var r=n(78),o=n(42);t.exports=Object.keys||function(t){return r(t,o)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){function r(t){return null==t?void 0===t?s:a:(t=Object(t),c&&c in t?i(t):u(t))}var o=n(90),i=n(223),u=n(229),a="[object Null]",s="[object Undefined]",c=o?o.toStringTag:void 0;t.exports=r},function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},function(t,e,n){var r=n(38);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=!0},function(t,e){e.f={}.propertyIsEnumerable},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(8).f,o=n(10),i=n(3)("toStringTag");t.exports=function(t,e,n){t&&!o(t=n?t:t.prototype,i)&&r(t,i,{configurable:!0,value:e})}},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){"use strict";var r=n(175)(!0);n(75)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){n(179);for(var r=n(4),o=n(11),i=n(18),u=n(3)("toStringTag"),a=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],s=0;s<5;s++){var c=a[s],f=r[c],l=f&&f.prototype;l&&!l[u]&&o(l,u,c),i[c]=i.Array}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.JwksClient=void 0;var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(57),s=r(a),c=n(101),f=r(c),l=n(84),d=(r(l),n(85)),p=r(d),h=n(87),v=r(h),g=n(192),m=n(194);e.JwksClient=function(){function t(e){var n=this;o(this,t),this.getSigningKey=function(t,e){n.logger("Fetching signing key for '"+t+"'"),n.getSigningKeys(function(r,o){if(r)return e(r);var i=o.find(function(e){return e.kid===t});return i?e(null,i):(n.logger("Unable to find a signing key that matches '"+t+"'"),e(new v.default("Unable to find a signing key that matches '"+t+"'")))})},this.options=i({rateLimit:!1,cache:!1,strictSsl:!0},e),this.logger=(0,s.default)("jwks"),this.options.rateLimit&&(this.getSigningKey=(0,m.rateLimitSigningKey)(this,e)),this.options.cache&&(this.getSigningKey=(0,m.cacheSigningKey)(this,e))}return u(t,[{key:"getKeys",value:function(t){var e=this;this.logger("Fetching keys from '"+this.options.jwksUri+"'"),(0,f.default)({json:!0,uri:this.options.jwksUri,strictSSL:this.options.strictSsl},function(n,r){return n||r.statusCode<200||r.statusCode>=300?(e.logger("Failure:",r&&r.body||n),t(r?new p.default(r.body&&(r.body.message||r.body)||r.statusMessage||"Http Error "+r.statusCode):n)):(e.logger("Keys:",r.body.keys),t(null,r.body.keys))})}},{key:"getSigningKeys",value:function(t){var e=this;this.getKeys(function(n,r){if(n)return t(n);if(!r||!r.length)return t(new p.default("The JWKS endpoint did not contain any keys"));var o=r.filter(function(t){return"sig"===t.use&&"RSA"===t.kty&&t.kid&&(t.x5c&&t.x5c.length||t.n&&t.e)}).map(function(t){return t.x5c&&t.x5c.length?{kid:t.kid,nbf:t.nbf,publicKey:(0,g.certToPEM)(t.x5c[0])}:{kid:t.kid,nbf:t.nbf,rsaPublicKey:(0,g.rsaPublicKeyToPEM)(t.n,t.e)}});return o.length?(e.logger("Signing Keys:",o),t(null,o)):t(new p.default("The JWKS endpoint did not contain any signing keys"))})}}]),t}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.SigningKeyNotFoundError=e.JwksRateLimitError=e.JwksError=e.ArgumentError=void 0;var o=n(84),i=r(o),u=n(85),a=r(u),s=n(86),c=r(s),f=n(87),l=r(f);e.ArgumentError=i.default,e.JwksError=a.default,e.JwksRateLimitError=c.default,e.SigningKeyNotFoundError=l.default},function(t,e,n){function r(t){return null!=t&&i(t.length)&&!o(t)}var o=n(54),i=n(99);t.exports=r},function(t,e){t.exports=require("auth0-source-control-extension-tools@3.1.4")},function(t,e){t.exports=require("path")},function(t,e,n){t.exports={default:n(147),__esModule:!0}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(20),o=n(3)("toStringTag"),i="Arguments"==r(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=Object(t),o))?n:i?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(21),o=n(4).document,i=r(o)&&r(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(45)("keys"),o=n(29);t.exports=function(t){return r[t]||(r[t]=o(t))}},function(t,e,n){var r=n(4),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(40);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(21);t.exports=function(t,e){if(!r(t))return t;var n,o;if(e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;if("function"==typeof(n=t.valueOf)&&!r(o=n.call(t)))return o;if(!e&&"function"==typeof(n=t.toString)&&!r(o=n.call(t)))return o;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var r=n(4),o=n(2),i=n(25),u=n(50),a=n(8).f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:u.f(t)})}},function(t,e,n){e.f=n(3)},function(t,e,n){var r=n(94),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();t.exports=i},function(t,e){function n(t){return t}t.exports=n},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){function r(t){if(!i(t))return!1;var e=o(t);return e==a||e==s||e==u||e==c}var o=n(22),i=n(55),u="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",c="[object Proxy]";t.exports=r},function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},function(t,e,n){function r(t){return u(t)?o(t):i(t)}var o=n(203),i=n(210),u=n(34);t.exports=r},function(t,e){t.exports=require("debug@2.2.0")},function(t,e,n){function r(t){if(!t.container)return null;const e=t.container.replace(c,"\\$&"),n=t.jtn?t.jtn.replace(c,"\\$&"):"";if(t.url_format===s)return new RegExp("^/api/run/"+e+"/(?:"+n+"/?)?");if(t.url_format===a)return new RegExp("^/"+e+"/(?:"+n+"/?)?");if(t.url_format===u)return new RegExp("^/(?:"+n+"/?)?");throw new Error("Unsupported webtask URL format.")}function o(t,e){if(!t)return null;const n=t.indexOf("sandbox8")>=0?"8":"";return"https://"+e+"."+(t.split(".it.auth0.com")[0].split("-")[1]||"us")+n+".webtask.io/"}const i=n(258),u=3,a=2,s=1,c=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,f=function(t,e){var n=i.parse(t).pathname||"";return n=n.replace(e,"").replace(/^\/|\/$/g,""),n.startsWith("/")||(n="/"+n),n.endsWith("/")||(n+="/"),n};t.exports.getBasePath=function(t){return f(t.originalUrl||"",t.path)},t.exports.getBaseUrl=function(t,e){var n=e;const r=i.parse(t.originalUrl||"").pathname||"";return i.format({protocol:n||"https",host:t.headers.host,pathname:r.replace(t.path,"").replace(/\/$/g,"")})},t.exports.getWebtaskUrl=function(t){const e=r(t.x_wt),n=t.url,u=t.url.replace(e,"/"),a=i.parse(u||"").pathname,s=t.x_wt&&t.x_wt.ectx&&t.x_wt.ectx.ISOLATED_DOMAIN||!1,c=i.parse(n||"").pathname||"";var f;if(s){f=i.format({protocol:"https",host:t.headers.host,pathname:c.replace(a,"").replace(/\/$/g,"")});const l=".it.auth0.com/api/run/"+t.x_wt.container+"/",d=o(f,t.x_wt.container);f.indexOf(l)>=0&&(f=f.replace("https://"+t.headers.host+"/api/run/"+t.x_wt.container+"/",d))}else f=c;return f}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";var r=n(244);t.exports=function(t,e,n){return function(o,i,u){var a=r(u);return!0===t||"function"==typeof t&&t(o,i,a)?e(o,i,a):n?n(o,i,a):a()}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(139),i=r(o),u=n(37),a=r(u),s=n(69),c=r(s),f=n(71),l=r(f),d=n(137),p=r(d),h=n(138),v=r(h),g=n(248),m=function(){function t(e){(0,p.default)(this,t),this.password=e}return(0,v.default)(t,[{key:"decrypt",value:function(t){var e=t.replace("[!cipher]","").replace("[rehpic!]","").split("-"),n=(0,l.default)(e,2),r=n[0],o=n[1];return g.pwdDecrypt.aead(this.password,r,o).then(function(e){return{original:t,plain:e.toString("utf8")}})}},{key:"decryptString",value:function(t){var e=this,n=/\[!cipher][0-9a-fA-F]+-[0-9a-fA-F]+\[rehpic!]/g,r=t.match(n)||[],o=[];return r.forEach(function(t){return o.push(e.decrypt(t))}),c.default.all(o).then(function(e){var n=t;return e.forEach(function(t){n=n.replace(t.original,t.plain)}),n})}},{key:"prepareData",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t&&(0,a.default)(t).forEach(function(r){"string"==typeof t[r]?n.push(e.decryptString(t[r]).then(function(e){t[r]=e})):"object"===(0,i.default)(t[r])&&e.prepareData(t[r],n)}),n}},{key:"processData",value:function(t){return c.default.all(this.prepareData(t))}},{key:"encrypt",value:function(t){return g.pwdEncrypt.aead(t,this.password).then(function(t){return"[!cipher]"+t.ciphertext.toString("hex")+"-"+t.nonce.toString("hex")+"[rehpic!]"})}}]),t}();e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(69),i=r(o),u=n(35),a=n(120),s=r(a),c=n(66),f=n(0),l=r(f),d=n(65),p=d.getChanges;e.default=function(t,e,n){var r=n.id,o=n.sha,a=n.user,f=n.branch,d=n.repository,h={id:r,sha:o,user:a,branch:f,repository:d};return n.version="manual"===r?o:f,p(n).then(function(e){return(0,c.getExcluded)(t).then(function(t){return e.exclude=t,h.assets=e,e})}).then(function(t){return(0,u.deploy)(t,e,l.default)}).then(function(e){return(0,s.default)(t,{repo:h,progress:e})}).catch(function(e){return(0,s.default)(t,{repo:h,error:e.message}).then(function(){return i.default.reject(e)})})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOptions=e.getChanges=e.hasChanges=void 0;var o=n(68),i=r(o),u=n(37),a=r(u),s=n(9),c=r(s),f=n(36),l=(r(f),n(13)),d=r(l),p=n(35),h=n(103),v=n(67),g=r(v),m=n(15),y=r(m),_=n(0),b=r(_),E=null,x=function(){if(!E){var t="https://"+(0,b.default)("INSTANCE")+".visualstudio.com/"+(0,b.default)("COLLECTION"),e="pat"===(0,b.default)("AUTH_METHOD")?(0,h.getPersonalAccessTokenHandler)((0,b.default)("TOKEN")):(0,h.getBasicHandler)((0,b.default)("USERNAME"),(0,b.default)("PASSWORD")),n=new h.WebApi(t,e);E=n.getGitApi()}return d.default.resolve(E)},w=(e.hasChanges=function(t,e){return new d.default(function(n,r){try{var o=[];return x().then(function(n){return n.getChanges(t,e)}).then(function(t){o=t?o.concat(t.changes):[]}).then(function(){return n(c.default.chain(o).map(function(t){return t.item.path}).flattenDeep().uniq().filter(function(t){return g.default.validFilesOnly(t.slice(1))}).value().length>0)}).catch(function(t){return r(t)})}catch(t){return r(t)}})},function(t,e){return new d.default(function(n,r){if(/[a-z0-9]{40}/.test(e))return n(e);try{return x().then(function(n){return n.getBranch(t,e)}).then(function(t){return t?n(t.commit.commitId):(y.default.error("Branch '"+e+"' not found"),r(new Error("Branch '"+e+"' not found")))}).catch(function(t){return r(t)})}catch(t){return r(t)}})}),S=function(t,e){return w(t,e).then(function(e){return x().then(function(n){return n.getCommit(e,t)})}).then(function(e){return x().then(function(n){return n.getTree(t,e.treeId,null,null,!0)})}).then(function(t){return t.treeEntries.filter(function(t){return 3===t.gitObjectType}).filter(function(t){return g.default.validFilesOnly(t.relativePath)}).map(function(t){return{path:t.relativePath,id:t.objectId}})})},T=function(t,e,n){return new d.default(function(e,r){try{x().then(function(e){return e.getBlobContent(t,n.id,null,!0)}).then(function(t){if(t){var o="";t.on("data",function(t){o+=t}),t.on("end",function(){return e({fileName:n.path,contents:o})})}else y.default.error("Error downloading '"+n.path+"'"),r(new Error("Error downloading '"+n.path+"'"))})}catch(t){r(t)}})},O=function(t,e,n,r){var o={script:!1,metadata:!1,name:n},i=[];return r.script&&i.push(T(t,0,r.scriptFile).then(function(t){o.script=!0,o.scriptFile=t.contents})),r.metadata&&i.push(T(t,0,r.metadataFile).then(function(t){o.metadata=!0,o.metadataFile=JSON.parse(t.contents)})),d.default.all(i).then(function(){return o})},k=function(t,e,n,r){var o={metadata:!1,name:n},i=[];return r.configFile&&i.push(T(t,0,r.configFile).then(function(t){o.configFile=JSON.parse(t.contents)})),r.metadataFile&&i.push(T(t,0,r.metadataFile).then(function(t){o.metadata=!0,o.metadataFile=JSON.parse(t.contents)})),d.default.all(i).then(function(){return o})},j=function(t,e,n){var r=g.default.getRulesFiles(n);return d.default.map((0,a.default)(r),function(e){return O(t,0,e,r[e])},{concurrency:2})},A=function(t,e,n,r){var o=g.default.getConfigurablesFiles(n,r);return d.default.map((0,a.default)(o),function(e){return k(t,0,e,o[e])},{concurrency:2})},R=function(t,e,n,r){var o={name:n,scripts:[]},i=[];return r.forEach(function(e){i.push(T(t,0,e).then(function(t){"settings"===e.name?o.settings=t.contents:o.scripts.push({name:e.name,scriptFile:t.contents})}))}),d.default.all(i).then(function(){return o})},C=function(t,e,n){var r=g.default.getDatabaseFiles(n);return d.default.map((0,a.default)(r),function(e){return R(t,0,e,r[e])},{concurrency:2})},I=function(t,e,n,r){var o=[],i={metadata:!1,name:n};return r.file&&o.push(T(t,0,r.file).then(function(t){i.htmlFile=t.contents})),r.meta_file&&o.push(T(t,0,r.meta_file).then(function(t){i.metadata=!0,i.metadataFile=t.contents})),d.default.all(o).then(function(){return i})},P=function(t,e,n,r,o){var i=g.default.getTplFiles(n,r,o);return d.default.map((0,a.default)(i),function(e){return I(t,0,e,i[e])},{concurrency:2})},N=function(t,e,n){return k(t,0,"emailProvider",{configFile:c.default.find(n,function(t){return g.default.isEmailProvider(t.path)})})},M=(e.getChanges=function(t){var e=t.repositoryId,n=t.branch;return new d.default(function(t,r){S(e,n).then(function(t){y.default.debug("Files in tree: "+(0,i.default)(t.map(function(t){return{name:t.path,id:t.id}}),null,2));var n={rules:j(e,0,t),databases:C(e,0,t),emailProvider:N(e,0,t),emailTemplates:P(e,0,t,p.constants.EMAIL_TEMPLATES_DIRECTORY,p.constants.EMAIL_TEMPLATES_NAMES),pages:P(e,0,t,p.constants.PAGES_DIRECTORY,p.constants.PAGE_NAMES),clients:A(e,0,t,p.constants.CLIENTS_DIRECTORY),clientGrants:A(e,0,t,p.constants.CLIENTS_GRANTS_DIRECTORY),connections:A(e,0,t,p.constants.CONNECTIONS_DIRECTORY),rulesConfigs:A(e,0,t,p.constants.RULES_CONFIGS_DIRECTORY),resourceServers:A(e,0,t,p.constants.RESOURCE_SERVERS_DIRECTORY)};return d.default.props(n).then(function(t){return g.default.unifyData(t)})}).catch(function(t){return r(t)})})},function(){return x().then(function(t){return t.getRepositories()}).then(function(t){if(!t)return null;var e=null,n=t.filter(function(t){return t.name===(0,b.default)("REPOSITORY")});return n[0]&&n[0].id&&(e=n[0].id),e})});e.getOptions=function(t){return M().then(function(e){return{id:"manual",branch:(0,b.default)("BRANCH"),repository:(0,b.default)("REPOSITORY"),sha:t.body&&t.body.sha||(0,b.default)("BRANCH"),user:t.user.sub,repositoryId:e}})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.getOptions=e.getChanges=e.hasChanges=void 0;var o=n(68),i=r(o),u=n(37),a=r(u),s=n(9),c=r(s),f=n(13),l=r(f),d=n(246),p=r(d),h=n(35),v=n(103),g=n(0),m=r(g),y=n(15),_=r(y),b=n(67),E=r(b),x=null,w=function(){if(!x){var t="https://"+(0,m.default)("INSTANCE")+".visualstudio.com/"+(0,m.default)("COLLECTION"),e="pat"===(0,m.default)("AUTH_METHOD")?(0,v.getPersonalAccessTokenHandler)((0,m.default)("TOKEN")):(0,v.getBasicHandler)((0,m.default)("USERNAME"),(0,m.default)("PASSWORD")),n=new v.WebApi(t,e);x=n.getTfvcApi()}return l.default.resolve(x)},S=(e.hasChanges=function(t){return w().then(function(e){return e.getChangesetChanges(t).then(function(t){return c.default.chain(t).map(function(t){return t.item.path}).flattenDeep().uniq().filter(E.default.validFilesOnly).value().length>0})})},function(t,e){return new l.default(function(n,r){try{w().then(function(n){return n.getItems(t,E.default.getPrefix()+"/"+e)}).then(function(t){if(!t)return n([]);var e=t.filter(function(t){return t.size}).filter(function(t){return E.default.validFilesOnly(t.path)});return n(e)}).catch(function(t){return r(t)})}catch(t){r(t)}})}),T=function(t,e,n){return new l.default(function(e,r){try{w().then(function(e){return e.getItems(t,n)}).then(function(t){if(!t)return e([]);var n=t.filter(function(t){return t.size}).filter(function(t){return E.default.validFilesOnly(t.path)});return e(n)})}catch(t){r(t)}})},O=function(t,e){return new l.default(function(e,n){try{w().then(function(e){return e.getItems(t,E.default.getPrefix()+"/"+h.constants.DATABASE_CONNECTIONS_DIRECTORY)}).then(function(n){if(!n)return e([]);var r=n.filter(function(t){return t.isFolder&&t.path!==E.default.getPrefix()+"/"+h.constants.DATABASE_CONNECTIONS_DIRECTORY}),o=[],i=[];return r.forEach(function(e){o.push(T(t,0,e.path).then(function(t){i=i.concat(t)}))}),l.default.all(o).then(function(){return e(i)})}).catch(function(t){return n(t)})}catch(t){n(t)}})},k=function(t,e){return new l.default(function(e,n){var r={rules:S(t,h.constants.RULES_DIRECTORY),databases:O(t),emails:S(t,h.constants.EMAIL_TEMPLATES_DIRECTORY),pages:S(t,h.constants.PAGES_DIRECTORY),clients:S(t,h.constants.CLIENTS_DIRECTORY),clientGrants:S(t,h.constants.CLIENTS_GRANTS_DIRECTORY),connections:S(t,h.constants.CONNECTIONS_DIRECTORY),rulesConfigs:S(t,h.constants.RULES_CONFIGS_DIRECTORY),resourceServers:S(t,h.constants.RESOURCE_SERVERS_DIRECTORY)};return l.default.props(r).then(function(t){return e(c.default.union(t.rules,t.databases,t.emails,t.pages,t.clients,t.clientGrants,t.connections,t.rulesConfigs,t.resourceServers))}).catch(function(t){return n(t)})})},j=function(t,e){var n=parseInt(e,10)||null,r=n?"&version="+n:"",o=new Buffer((0,m.default)("USERNAME")+":"+(0,m.default)("TOKEN")).toString("base64"),i={headers:{Authorization:"Basic "+o,"Content-Type":"text/html"},uri:"https://"+(0,m.default)("INSTANCE")+".visualstudio.com/"+(0,m.default)("COLLECTION")+"/_apis/tfvc/items?path="+t.path+r+"&api-version=1.0"};return p.default.get(i).then(function(e){return{fileName:t.path,contents:e}}).catch(function(t){return t})},A=function(t,e,n){var r={script:!1,metadata:!1,name:e},o=[];return n.script&&o.push(j(n.scriptFile,t).then(function(t){r.script=!0,r.scriptFile=t.contents})),n.metadata&&o.push(j(n.metadataFile,t).then(function(t){r.metadata=!0,r.metadataFile=JSON.parse(t.contents)})),l.default.all(o).then(function(){return r})},R=function(t,e,n){var r={metadata:!1,name:e},o=[];return n.configFile&&o.push(j(n.configFile,t).then(function(t){r.configFile=JSON.parse(t.contents)})),n.metadataFile&&o.push(j(n.metadataFile,t).then(function(t){r.metadata=!0,r.metadataFile=JSON.parse(t.contents)})),l.default.all(o).then(function(){return r})},C=function(t,e){var n=E.default.getRulesFiles(e);return l.default.map((0,a.default)(n),function(e){return A(t,e,n[e])},{concurrency:2})},I=function(t,e,n){var r=E.default.getConfigurablesFiles(e,n);return l.default.map((0,a.default)(r),function(e){return R(t,e,r[e])},{concurrency:2})},P=function(t,e,n){var r={name:e,scripts:[]},o=[];return n.forEach(function(e){o.push(j(e,t).then(function(t){"settings"===e.name?r.settings=t.contents:r.scripts.push({name:e.name,scriptFile:t.contents})}))}),l.default.all(o).then(function(){return r})},N=function(t,e){var n=E.default.getDatabaseFiles(e);return l.default.map((0,a.default)(n),function(e){return P(t,e,n[e])},{concurrency:2})},M=function(t,e,n){var r=[],o={metadata:!1,name:e};return n.file&&r.push(j(n.file,t).then(function(t){o.htmlFile=t.contents})),n.meta_file&&r.push(j(n.meta_file,t).then(function(t){o.metadata=!0,o.metadataFile=t.contents})),l.default.all(r).then(function(){return o})},U=function(t,e,n,r){var o=E.default.getTplFiles(e,n,r);return l.default.map((0,a.default)(o),function(e){return M(t,e,o[e])},{concurrency:2})},F=function(t,e){return R(t,"emailProvider",{configFile:c.default.find(e,function(t){return E.default.isEmailProvider(t.path)})})};e.getChanges=function(t){var e=t.project,n=t.changesetId;return new l.default(function(t,r){k(e).then(function(t){_.default.debug("Files in tree: "+(0,i.default)(t.map(function(t){return{name:t.path,id:t.id}}),null,2));var e={rules:C(n,t),databases:N(n,t),emailProvider:F(n,t),emailTemplates:U(n,t,h.constants.EMAIL_TEMPLATES_DIRECTORY,h.constants.EMAIL_TEMPLATES_NAMES),pages:U(n,t,h.constants.PAGES_DIRECTORY,h.constants.PAGE_NAMES),clients:I(n,t,h.constants.CLIENTS_DIRECTORY),clientGrants:I(n,t,h.constants.CLIENTS_GRANTS_DIRECTORY),connections:I(n,t,h.constants.CONNECTIONS_DIRECTORY),rulesConfigs:I(n,t,h.constants.RULES_CONFIGS_DIRECTORY),resourceServers:I(n,t,h.constants.RESOURCE_SERVERS_DIRECTORY)};return l.default.props(e).then(function(t){return E.default.unifyData(t)})}).catch(function(t){return r(t)})})},e.getOptions=function(t){return new l.default(function(e){return e({id:"manual",project:(0,m.default)("REPOSITORY"),branch:(0,m.default)("PROJECT_PATH"),repository:(0,m.default)("REPOSITORY"),changesetId:t.body&&t.body.sha||"latest",sha:t.body&&t.body.sha||"latest",user:t.user.sub})})}},function(t,e,n){"use strict";var r=n(63),o=n(64),i=n(0);t.exports={getChanges:function(t){return"git"===i("TYPE")?r.getChanges(t):o.getChanges(t)},getOptions:function(t){return"git"===i("TYPE")?r.getOptions(t):o.getOptions(t)}}},function(t,e,n){"use strict";function r(t){return t.read().then(function(t){return{rules:t.excluded_rules,resourceServers:t.excluded_resource_servers}})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.read().then(function(n){return e.assets=null,delete e.assets,n.deployments=n.deployments||[],n.deployments.push(e),n.deployments=n.deployments.splice(-20,20),t.write(n).then(function(){return e})})},e.getExcluded=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o=n(71),i=r(o),u=n(70),a=r(u),s=n(9),c=r(s),f=n(36),l=r(f),d=n(13),p=r(d),h=n(1),v=n(35),g=n(61),m=r(g),y=n(0),_=r(y),b=n(15),E=r(b),x=function(){var t=(0,_.default)("BASE_DIR")||"";return t.startsWith("/")&&(t=t.slice(1)),""===t||t.endsWith("/")||(t+="/"),t},w=function(){return"tfvc"===(0,_.default)("TYPE")?(0,_.default)("PROJECT_PATH"):x()},S=function(t){return 0===t.indexOf(l.default.join(w(),v.constants.RULES_DIRECTORY)+"/")},T=function(t){return 0===t.indexOf(l.default.join(w(),v.constants.DATABASE_CONNECTIONS_DIRECTORY)+"/")},O=function(t,e,n){return 0===t.indexOf(l.default.join(w(),e)+"/")&&n.indexOf(t.split("/").pop())>=0},k=function(t){return t===l.default.join(w(),v.constants.EMAIL_TEMPLATES_DIRECTORY,"provider.json")},j=function(t,e){return 0===t.indexOf(l.default.join(w(),e)+"/")},A=function(t){"tfvc"===(0,_.default)("TYPE")&&(t=t.replace((0,_.default)("PROJECT_PATH")+"/",""));var e=t.split("/"),n=e.length;if(n>=3&&/\.js$/i.test(e[n-1])){var r=l.default.parse(e[n-1]).name;if(v.constants.DATABASE_SCRIPTS.indexOf(r)>-1)return{database:e[n-2],name:l.default.parse(r).name}}return null},R=function(t){"tfvc"===(0,_.default)("TYPE")&&(t=t.replace((0,_.default)("PROJECT_PATH")+"/",""));var e=t.split("/"),n=e.length;return n>=3&&"settings.json"===e[n-1]?{database:e[n-2],name:"settings"}:null},C=function(t){if(O(t,v.constants.PAGES_DIRECTORY,v.constants.PAGE_NAMES))return!0;if(O(t,v.constants.EMAIL_TEMPLATES_DIRECTORY,v.constants.EMAIL_TEMPLATES_NAMES))return!0;if(k(t))return!0;if(S(t))return/\.(js|json)$/i.test(t);if(j(t,v.constants.CLIENTS_DIRECTORY))return/\.(js|json)$/i.test(t);if(j(t,v.constants.CLIENTS_GRANTS_DIRECTORY))return/\.(js|json)$/i.test(t);if(j(t,v.constants.CONNECTIONS_DIRECTORY))return/\.(js|json)$/i.test(t);if(j(t,v.constants.RESOURCE_SERVERS_DIRECTORY))return/\.(js|json)$/i.test(t);if(j(t,v.constants.RULES_CONFIGS_DIRECTORY))return/\.(js|json)$/i.test(t);if(T(t)){var e=!!A(t),n=!!R(t);return e||n}return!1},I=function(t){var e={};return c.default.filter(t,function(t){return T(t.path)}).forEach(function(t){var n=A(t.path),r=R(t.path);n&&(e[n.database]=e[n.database]||[],e[n.database].push((0,a.default)({},n,{id:t.id,sha:t.sha,path:t.path}))),r&&(e[r.database]=e[r.database]||[],e[r.database].push((0,a.default)({},r,{id:t.id,sha:t.sha,path:t.path})))}),e},P=function(t,e){var n={};return c.default.filter(t,function(t){return j(t.path,e)}).forEach(function(t){var e=!1,r=l.default.parse(t.path).name;".json"===l.default.parse(t.path).ext&&(r.endsWith(".meta")&&(r=l.default.parse(r).name,e=!0),n[r]=n[r]||{},e?n[r].metadataFile=t:n[r].configFile=t,n[r].sha=t.sha,n[r].path=t.path)}),n},N=function(t,e,n){var r={};return c.default.filter(t,function(t){return O(t.path,e,n)}).forEach(function(t){var e=l.default.parse(t.path).name,n=l.default.parse(t.path).ext;r[e]=r[e]||{},".json"!==n?(r[e].file=t,r[e].sha=t.sha,r[e].path=t.path):(r[e].meta_file=t,r[e].meta_sha=t.sha,r[e].meta_path=t.path)}),r},M=function(t){var e={};return c.default.filter(t,function(t){return S(t.path)}).forEach(function(t){var n=l.default.parse(t.path).name;e[n]=e[n]||{},/\.js$/i.test(t.path)?(e[n].script=!0,e[n].scriptFile=t):/\.json$/i.test(t.path)&&(e[n].metadata=!0,e[n].metadataFile=t)}),e},U=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){E.default.info("Cannot extract data from:\n"+t)}return t||{}},F=function(t,e){switch(e){default:case"rules":var n=U(t.metadataFile),r=n.order,o=void 0===r?0:r,i=n.enabled,u=n.stage,s=void 0===u?"login_success":u;return{script:t.scriptFile,name:t.name,order:o,stage:s,enabled:i};case"pages":var f=U(t.metadataFile),l=f.enabled;return{html:t.htmlFile,name:t.name,enabled:l};case"emailTemplates":if("provider"===t.name)return null;var d=U(t.metadataFile);return(0,a.default)({},d,{body:t.htmlFile});case"clientGrants":case"emailProvider":var p=U(t.configFile);return(0,a.default)({},p);case"databases":var h=U(t.settings),v={},g=h.options||{};return c.default.forEach(t.scripts,function(t){v[t.name]=t.scriptFile}),t.scripts&&t.scripts.length&&(g.customScripts=v,g.enabledDatabaseCustomization=!0),(0,a.default)({},h,{options:g,strategy:"auth0",name:t.name});case"resourceServers":case"connections":case"clients":var m=U(t.metadataFile),y=U(t.configFile);return(0,a.default)({name:t.name},m,y);case"rulesConfigs":var _=U(t.configFile);return{key:t.name,value:_.value}}},D=function(t){var e={};if(c.default.forEach(t,function(t,n){e[n]=[],Array.isArray(t)?c.default.forEach(t,function(t){var r=F(t,n);r&&e[n].push(r)}):e[n]=F(t,n)}),!0===(0,_.default)("ENABLE_CIPHER")||"true"===(0,_.default)("ENABLE_CIPHER")){return new m.default((0,_.default)("CIPHER_PASSWORD")).processData(e).then(function(){return e})}return p.default.resolve(e)},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=t.split("/");if(2===e.length){var n=(0,i.default)(e,2);return{user:n[0],repo:n[1]}}if(5===e.length){var r=(0,i.default)(e,5);return{user:r[3],repo:r[4]}}throw new h.ArgumentError("Invalid repository: "+t)},B=function(t){return new p.default(function(e){var n=L((0,_.default)("REPOSITORY")),r=n.user,o=n.repo,i=r+"/"+o;return e({id:"manual",branch:(0,_.default)("BRANCH"),sha:t.body&&t.body.sha||(0,_.default)("BRANCH"),user:t.user.sub,repository:i})})};t.exports={unifyData:D,getBaseDir:x,getPrefix:w,isRule:S,isDatabaseConnection:T,isTemplate:O,isEmailProvider:k,isConfigurable:j,getDatabaseFiles:I,getConfigurablesFiles:P,getTplFiles:N,getRulesFiles:M,validFilesOnly:C,getOptions:B,parseRepo:L}},function(t,e,n){t.exports={default:n(144),__esModule:!0}},function(t,e,n){t.exports={default:n(148),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(133),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=o.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(132),i=r(o),u=n(131),a=r(u);e.default=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var u,s=(0,a.default)(t);!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if((0,i.default)(Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports=n(4).document&&document.documentElement},function(t,e,n){t.exports=!n(7)&&!n(17)(function(){return 7!=Object.defineProperty(n(41)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(20);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var r=n(25),o=n(16),i=n(79),u=n(11),a=n(10),s=n(18),c=n(160),f=n(28),l=n(170),d=n(3)("iterator"),p=!([].keys&&"next"in[].keys()),h=function(){return this};t.exports=function(t,e,n,v,g,m,y){c(n,e,v);var _,b,E,x=function(t){if(!p&&t in O)return O[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},w=e+" Iterator",S="values"==g,T=!1,O=t.prototype,k=O[d]||O["@@iterator"]||g&&O[g],j=k||x(g),A=g?S?x("entries"):j:void 0,R="Array"==e?O.entries||k:k;if(R&&(E=l(R.call(new t)))!==Object.prototype&&(f(E,w,!0),r||a(E,d)||u(E,d,h)),S&&k&&"values"!==k.name&&(T=!0,j=function(){return k.call(this)}),r&&!y||!p&&!T&&O[d]||u(O,d,j),s[e]=j,s[w]=h,g)if(_={values:S?j:x("values"),keys:m?j:x("keys"),entries:A},y)for(b in _)b in O||i(O,b,_[b]);else o(o.P+o.F*(p||T),e,_);return _}},function(t,e,n){var r=n(6),o=n(167),i=n(42),u=n(44)("IE_PROTO"),a=function(){},s=function(){var t,e=n(41)("iframe"),r=i.length;for(e.style.display="none",n(72).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),s=t.F;r--;)delete s.prototype[i[r]];return s()};t.exports=Object.create||function(t,e){var n;return null!==t?(a.prototype=r(t),n=new a,a.prototype=null,n[u]=t):n=s(),void 0===e?n:o(n,e)}},function(t,e,n){var r=n(78),o=n(42).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,o)}},function(t,e,n){var r=n(10),o=n(12),i=n(153)(!1),u=n(44)("IE_PROTO");t.exports=function(t,e){var n,a=o(t),s=0,c=[];for(n in a)n!=u&&r(a,n)&&c.push(n);for(;e.length>s;)r(a,n=e[s++])&&(~i(c,n)||c.push(n));return c}},function(t,e,n){t.exports=n(11)},function(t,e,n){var r,o,i,u=n(24),a=n(156),s=n(72),c=n(41),f=n(4),l=f.process,d=f.setImmediate,p=f.clearImmediate,h=f.MessageChannel,v=0,g={},m=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){m.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++v]=function(){a("function"==typeof t?t:Function(t),e)},r(v),v},p=function(t){delete g[t]},"process"==n(20)(l)?r=function(t){l.nextTick(u(m,t,1))}:h?(o=new h,i=o.port2,o.port1.onmessage=y,r=u(i.postMessage,i,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",y,!1)):r="onreadystatechange"in c("script")?function(t){s.appendChild(c("script")).onreadystatechange=function(){s.removeChild(this),m.call(t)}}:function(t){setTimeout(u(m,t,1),0)}),t.exports={set:d,clear:p}},function(t,e,n){var r=n(46),o=Math.min;t.exports=function(t){return t>0?o(r(t),9007199254740991):0}},function(t,e,n){var r=n(39),o=n(3)("iterator"),i=n(18);t.exports=n(2).getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||i[r(t)]}},function(t,e){},function(t,e,n){"use strict";function r(t){Error.call(this,t),Error.captureStackTrace(this,this.constructor),this.name="ArgumentError",this.message=t}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){"use strict";function r(t){Error.call(this,t),Error.captureStackTrace(this,this.constructor),this.name="JwksError",this.message=t}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){"use strict";function r(t){Error.call(this,t),Error.captureStackTrace(this,this.constructor),this.name="JwksRateLimitError",this.message=t}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){"use strict";function r(t){Error.call(this,t),Error.captureStackTrace(this,this.constructor),this.name="SigningKeyNotFoundError",this.message=t}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,t.exports=r},function(t,e,n){"use strict";var r=n(197);t.exports=function(t,e){if("string"!=typeof t)throw new Error("Invalid token specified");e=e||{};var n=!0===e.header?0:1;return JSON.parse(r(t.split(".")[n]))}},function(t,e){var n=function(t,e,n,r){if(this.bucketSize=t,this.tokensPerInterval=e,"string"==typeof n)switch(n){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invaid interval "+n)}else this.interval=n;this.parentBucket=r,this.content=0,this.lastDrip=+new Date};n.prototype={bucketSize:1,tokensPerInterval:1,interval:1e3,parentBucket:null,content:0,lastDrip:0,removeTokens:function(t,e){function n(){var n=Math.ceil((t-r.content)*(r.interval/r.tokensPerInterval));return setTimeout(function(){r.removeTokens(t,e)},n),!1}var r=this;return this.bucketSize?t>this.bucketSize?(process.nextTick(e.bind(null,"Requested tokens "+t+" exceeds bucket size "+this.bucketSize,null)),!1):(this.drip(),t>this.content?n():this.parentBucket?this.parentBucket.removeTokens(t,function(o,i){return o?e(o,null):t>r.content?n():(r.content-=t,void e(null,Math.min(i,r.content)))}):(this.content-=t,process.nextTick(e.bind(null,null,this.content)),!0)):(process.nextTick(e.bind(null,null,t,Number.POSITIVE_INFINITY)),!0)},tryRemoveTokens:function(t){return!this.bucketSize||!(t>this.bucketSize)&&(this.drip(),!(t>this.content)&&(!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(t))&&(this.content-=t,!0)))},drip:function(){if(!this.tokensPerInterval)return void(this.content=this.bucketSize);var t=+new Date,e=Math.max(t-this.lastDrip,0);this.lastDrip=t;var n=e*(this.tokensPerInterval/this.interval);this.content=Math.min(this.content+n,this.bucketSize)}},t.exports=n},function(t,e,n){var r=n(51),o=r.Symbol;t.exports=o},function(t,e,n){function r(t,e,n){var r=t[e];a.call(t,e)&&i(r,n)&&(void 0!==n||e in t)||o(t,e,n)}var o=n(92),i=n(98),u=Object.prototype,a=u.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e,n){"__proto__"==e&&o?o(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var o=n(93);t.exports=r},function(t,e,n){var r=n(221),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e){var n="object"==typeof global&&global&&global.Object===Object&&global;t.exports=n},function(t,e){function n(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||o.test(t))&&t>-1&&t%1==0&&t<e}var r=9007199254740991,o=/^(?:0|[1-9]\d*)$/;t.exports=n},function(t,e){function n(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}var r=Object.prototype;t.exports=n},function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},function(t,e){function n(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}var r=9007199254740991;t.exports=n},function(t,e){t.exports=require("express-jwt@3.1.0")},function(t,e){t.exports=require("request@2.56.0")},function(t,e){t.exports=require("superagent@3.8.3")},function(t,e){t.exports=require("vso-node-api@6.5.0")},function(t,e,n){"use strict";(function(e){function r(t){return t&&t.__esModule?t:{default:t}}var o=n(247),i=r(o),u=n(36),a=r(u),s=n(256),c=r(s),f=n(5),l=r(f),d=n(249),p=r(d),h=n(1),v=r(h),g=n(14),m=n(125),y=r(m),_=n(15),b=r(_),E=n(0),x=r(E);t.exports=function(t,n){x.default.setProvider(t);var r=n?new v.default.WebtaskStorageContext(n,{force:1}):new v.default.FileStorageContext(a.default.join(e,"./data.json"),{mergeWrites:!0}),o=new l.default;return o.use((0,c.default)(":method :url :status :response-time ms - :res[content-length]",{stream:b.default.stream})),o.use(p.default.json({verify:function(t,e,n,r){n&&n.length&&(t.rawBody=n.toString(r||"utf8"))}})),o.use(p.default.urlencoded({extended:!1})),o.get("/login",function(t,e){e.redirect((0,i.default)((0,x.default)("PUBLIC_WT_URL"),"/admins/login"))}),o.use(g.routes.dashboardAdmins({secret:(0,x.default)("EXTENSION_SECRET"),audience:"urn:visualstudio-deploy",rta:(0,x.default)("AUTH0_RTA").replace("https://",""),domain:(0,x.default)("AUTH0_DOMAIN"),baseUrl:(0,x.default)("PUBLIC_WT_URL"),clientName:"visualstudio Deploy Extension",urlPrefix:"/admins",sessionStorageKey:"visualstudio-deploy:apiToken",scopes:["read:client_grants","create:client_grants","delete:client_grants","update:client_grants","read:clients","update:clients","delete:clients","create:clients","read:client_keys","update:client_keys","delete:client_keys","create:client_keys","read:connections","update:connections","delete:connections","create:connections","read:resource_servers","update:resource_servers","delete:resource_servers","create:resource_servers","read:rules","update:rules","delete:rules","create:rules","read:rules_configs","update:rules_configs","delete:rules_configs","read:email_provider","update:email_provider","delete:email_provider","create:email_provider","read:tenant_settings","update:tenant_settings","read:grants","delete:grants","read:guardian_factors","update:guardian_factors","read:email_templates","create:email_templates","update:email_templates"].join(" ")})),o.use("/app",l.default.static(a.default.join(e,"../dist"))),o.use("/",(0,y.default)(r)),o.use(g.middlewares.errorHandler(b.default.error.bind(b.default))),o}}).call(e,"/")},function(t,e,n){const r=n(88),o=n(100),i=n(1),u=n(60);t.exports=function(t){if(!t||"object"!=typeof t)throw new i.ArgumentError("Must provide the options");if(null===t.secret||void 0===t.secret)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof t.secret||0===t.secret.length)throw new i.ArgumentError("The provided secret is invalid: "+t.secret);if(null===t.audience||void 0===t.audience)throw new i.ArgumentError("Must provide a valid secret");if("string"!=typeof t.audience||0===t.audience.length)throw new i.ArgumentError("The provided audience is invalid: "+t.audience);if(null===t.baseUrl||void 0===t.baseUrl)throw new i.ArgumentError("Must provide a valid base URL");if("string"!=typeof t.baseUrl||0===t.baseUrl.length)throw new i.ArgumentError("The provided base URL is invalid: "+t.baseUrl);const e=o({audience:t.audience,issuer:t.baseUrl,secret:t.secret,algorithms:["HS256"],credentialsRequired:t.credentialsRequired||!0});return function(n,r,o){e(n,r,function(e){return e?o(e):t.onLoginSuccess?t.onLoginSuccess(n,r,o):o()})}},t.exports.optional=function(e){const n=t.exports(e);return u(function(t){if(t&&t.headers&&t.headers.authorization&&0===t.headers.authorization.indexOf("Bearer "))try{const n=r(t.headers.authorization.split(" ")[1]);return n&&n.iss===e.baseUrl}catch(t){return!1}return!1},n)}},function(t,e,n){const r=n(88),o=n(100),i=n(188),u=n(1),a=n(60),s=n(1).UnauthorizedError;t.exports=function(t){if(!t||"object"!=typeof t)throw new u.ArgumentError("Must provide the options");if(null===t.domain||void 0===t.domain)throw new u.ArgumentError("Must provide a valid domain");if("string"!=typeof t.domain||0===t.domain.length)throw new u.ArgumentError("The provided domain is invalid: "+t.domain);if(null===t.audience||void 0===t.audience)throw new u.ArgumentError("Must provide a valid audience");if("string"!=typeof t.audience||0===t.audience.length)throw new u.ArgumentError("The provided audience is invalid: "+t.audience);const e=o({secret:i.expressJwtSecret({cache:!0,rateLimit:!0,jwksRequestsPerMinute:5,jwksUri:"https://"+t.domain+"/.well-known/jwks.json",handleSigningKeyError:function(t,e){return e(t instanceof i.SigningKeyNotFoundError?new s("A token was provided with an invalid kid"):t)}}),audience:t.audience,issuer:"https://"+t.domain+"/",algorithms:["RS256"],credentialsRequired:t&&t.credentialsRequired||!0});return function(n,r,o){e(n,r,function(e){return e?o(e):t.onLoginSuccess?t.onLoginSuccess(n,r,o):o()})}},t.exports.optional=function(e){const n=t.exports(e);return a(function(t){if(t&&t.headers&&t.headers.authorization&&0===t.headers.authorization.indexOf("Bearer "))try{const n=r(t.headers.authorization.split(" ")[1]);return n&&n.iss==="https://"+e.domain+"/"}catch(t){return!1}return!1},n)}},function(t,e,n){t.exports=function(t){return function(e,n,r,o){return t&&t(e),e&&e.status?(r.status(e.status),r.json({error:e.code||e.name,message:e.message||e.name})):(r.status(e.status||500),r.json({error:"InternalServerError",message:e.message||e.name}))}}},function(t,e,n){t.exports.authenticateAdmins=n(105),t.exports.authenticateUsers=n(106),t.exports.requireAuthentication=n(110),t.exports.errorHandler=n(107),t.exports.managementApiClient=n(109),t.exports.validateHookToken=n(111),t.exports.webtaskConfig=n(112)},function(t,e,n){const r=n(1);t.exports=function(t){return function(e,n,o){const i=e,u=e.user&&e.user.access_token&&e.user.access_token.length,a=u?{domain:t.domain,accessToken:e.user.access_token}:t;r.managementApi.getClient(a).then(function(t){return i.auth0=t,o(),null}).catch(function(t){o(t)})}}},function(t,e,n){const r=n(1).UnauthorizedError;t.exports=function(t,e,n){return t.user?n():n(new r("Authentication required for this endpoint."))}},function(t,e,n){const r=n(1);t.exports=function(t,e,n){if(null===t||void 0===t)throw new r.ArgumentError("Must provide the domain");if("string"!=typeof t||0===t.length)throw new r.ArgumentError("The provided domain is invalid: "+t);if(null===e||void 0===e)throw new r.ArgumentError("Must provide the webtaskUrl");if("string"!=typeof e||0===e.length)throw new r.ArgumentError("The provided webtaskUrl is invalid: "+e);if(null===n||void 0===n)throw new r.ArgumentError("Must provide the extensionSecret");if("string"!=typeof n||0===n.length)throw new r.ArgumentError("The provided extensionSecret is invalid: "+n);return function(o){if(null===o||void 0===o)throw new r.ArgumentError("Must provide the hookPath");if("string"!=typeof o||0===o.length)throw new r.ArgumentError("The provided hookPath is invalid: "+o);return function(i,u,a){if(i.headers.authorization&&"Bearer"===i.headers.authorization.split(" ")[0]){const s=i.headers.authorization.split(" ")[1];try{if(r.validateHookToken(t,e,o,n,s))return a()}catch(t){return a(t)}}return a(new r.HookTokenError("Hook token missing for the call to: "+o))}}}},function(t,e,n){const r=n(1);t.exports=function(t){return function(e,n,o){return e.webtaskContext&&t.setProvider(r.configProvider.fromWebtaskContext(e.webtaskContext)),o()}}},function(t,e,n){const r=n(5),o=n(251),i=n(140),u=n(254),a=n(1),s=n(58);t.exports=function(t){if(!t||"object"!=typeof t)throw new a.ArgumentError("Must provide the options");if(null===t.secret||void 0===t.secret)throw new a.ArgumentError("Must provide a valid secret");if("string"!=typeof t.secret||0===t.secret.length)throw new a.ArgumentError("The provided secret is invalid: "+t.secret);if(null===t.audience||void 0===t.audience)throw new a.ArgumentError("Must provide a valid audience");if("string"!=typeof t.audience||0===t.audience.length)throw new a.ArgumentError("The provided audience is invalid: "+t.audience);if(null===t.rta||void 0===t.rta)throw new a.ArgumentError("Must provide a valid rta");if("string"!=typeof t.rta||0===t.rta.length)throw new a.ArgumentError("The provided rta is invalid: "+t.rta);if(null===t.domain||void 0===t.domain)throw new a.ArgumentError("Must provide a valid domain");if("string"!=typeof t.domain||0===t.domain.length)throw new a.ArgumentError("The provided domain is invalid: "+t.domain);if(null===t.baseUrl||void 0===t.baseUrl)throw new a.ArgumentError("Must provide a valid base URL");if("string"!=typeof t.baseUrl||0===t.baseUrl.length)throw new a.ArgumentError("The provided base URL is invalid: "+t.baseUrl);if(null===t.clientName||void 0===t.clientName)throw new a.ArgumentError("Must provide a valid client name");if("string"!=typeof t.clientName||0===t.clientName.length)throw new a.ArgumentError("The provided client name is invalid: "+t.clientName);if(void 0!==t.storageType&&"sessionStorage"!==t.storageType&&"localStorage"!==t.storageType)throw new a.ArgumentError('The storageType must be either "sessionStorage" or "localStorage". Incorrect storageType: '+t.storageType);const e=t.stateKey||"state",n=t.nonceKey||"nonce",c=t.urlPrefix||"",f=t.storageType||"sessionStorage",l=t.storageKey||t.sessionStorageKey||"apiToken",d=new a.SessionManager(t.rta,t.domain,t.baseUrl),p=r.Router();return p.get(c+"/login",function(r,i){const u=s.getBasePath(r),a=o.randomBytes(16).toString("hex"),f=o.randomBytes(16).toString("hex");i.cookie(e,a,{path:u}),i.cookie(n,f,{path:u});const l=d.createAuthorizeUrl({redirectUri:s.getBaseUrl(r)+c+"/login/callback",scopes:t.scopes,expiration:t.expiration,nonce:f,state:a});i.redirect(l)}),p.post(c+"/login/callback",i(),function(r,o,i){var c;try{c=u.decode(r.body.id_token)}catch(t){c=null}if(!c)return i(new a.ValidationError("Login failed. Invalid token."));if(!r.cookies||r.cookies[n]!==c.nonce)return i(new a.ValidationError("Login failed. Nonce mismatch."));if(!r.cookies||r.cookies[e]!==r.body.state)return i(new a.ValidationError("Login failed. State mismatch."));const p=s.getBasePath(r);return d.create(r.body.id_token,r.body.access_token,{secret:t.secret,issuer:t.baseUrl,audience:t.audience,noAccessToken:t.noAccessToken}).then(function(t){o.clearCookie(e,{path:p}),o.clearCookie(n,{path:p}),o.header("Content-Type","text/html"),o.status(200).send('<html><head><script type="text/javascript">'+f+'.setItem("'+l+'", "'+t+'");window.location.href = "'+s.getBaseUrl(r)+'";<\/script></head></html>')}).catch(function(t){i(t)})}),p.get(c+"/logout",function(r,o){const i=s.getBasePath(r),u=encodeURIComponent(s.getBaseUrl(r));o.clearCookie(e,{path:i}),o.clearCookie(n,{path:i}),o.header("Content-Type","text/html"),o.status(200).send('<html><head><script type="text/javascript">'+f+'.removeItem("'+l+'");window.location.href = "https://'+t.rta+"/v2/logout/?returnTo="+u+"&client_id="+u+'";<\/script></head></html>')}),p.get("/.well-known/oauth2-client-configuration",function(e,n){n.header("Content-Type","application/json"),n.status(200).send({redirect_uris:[s.getBaseUrl(e)+c+"/login/callback"],client_name:t.clientName,post_logout_redirect_uris:[s.getBaseUrl(e)]})}),p}},function(t,e,n){t.exports.dashboardAdmins=n(113)},function(t,e,n){const r=n(1),o=n(259);t.exports.createServer=function(t){const e=r.createServer(t);var n=null;return o.fromExpress(function(t,r){return n||(n=e(t.webtaskContext)),n(t,r)})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return e?new i.default(function(n,r){a.default.post(e).send(t).set("Accept","application/json").end(function(t){return t?r(t):n()})}):i.default.resolve()};var o=n(13),i=r(o),u=n(102),a=r(u)},function(t,e,n){"use strict";var r=n(1),o=n(63),i=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(t){var e=t.notificationId,n=void 0===e?"":e,r=t.resource,o=void 0===r?{}:r,i=t.eventType,u=void 0===i?"":i,a=o.refUpdates[0].name.split("/"),s=o.refUpdates[0].newObjectId;return{id:n,repositoryId:o.repository.id,event:u,branch:3===a.length?a[2]:"",commitId:s,repository:o.repository.name,user:o.pushedBy.uniqueName,sha:s}};t.exports=function(){return function(t,e,n){if((0,u.default)("EXTENSION_SECRET")!==t.headers["x-hook-secret"])return n(new r.UnauthorizedError("The webhook secret is incorrect."));if(!t.body.resource.refUpdates||!t.body.resource.refUpdates[0])return n(new r.ArgumentError("The webhook details are incorrect."));var i=a(t.body);return"git.push"!==i.event?e.status(202).json({message:"Request ignored, the '"+i.event+"' event is not supported."}):(0,o.hasChanges)(i.commitId,i.repositoryId).then(function(r){return r?(t.webhook=i,n()):e.status(202).json({message:"Request ignored, none of the Rules or Database Connection scripts were changed."})})}}},function(t,e,n){"use strict";var r=n(1),o=n(64),i=n(0),u=function(t){return t&&t.__esModule?t:{default:t}}(i),a=function(t){var e=t.notificationId,n=void 0===e?"":e,r=t.resource,o=void 0===r?{}:r,i=t.eventType;return{id:n,event:void 0===i?"":i,changesetId:o.changesetId,sha:o.changesetId,user:o.checkedInBy.uniqueName,repository:(0,u.default)("REPOSITORY"),projectId:(0,u.default)("REPOSITORY"),branch:(0,u.default)("PROJECT_PATH")}};t.exports=function(){return function(t,e,n){if((0,u.default)("EXTENSION_SECRET")!==t.headers["x-hook-secret"])return n(new r.UnauthorizedError("The webhook secret is incorrect."));var i=a(t.body);return"tfvc.checkin"!==i.event?e.status(202).json({message:"Request ignored, the '"+i.event+"' event is not supported."}):(0,o.hasChanges)(i.changesetId).then(function(r){return r?(t.webhook=i,n()):e.status(202).json({message:"Request ignored, none of the Rules or Database Connection scripts were changed."})})}}},function(t,e,n){"use strict";var r=n(117),o=n(118),i=n(0);t.exports=function(){return"git"===i("TYPE")?r():o()}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(70),i=r(o);e.default=function(t,e){var n=(0,i.default)({},e.repo,{error:e.error,warnings:[],logs:y(e.progress),date:new Date});return c.default.all([(0,v.default)(n,(0,l.default)("WT_URL")+"/login",(0,l.default)("SLACK_INCOMING_WEBHOOK_URL")).catch(function(t){return n.warnings.push({title:"Error sending report to Slack",message:t}),c.default.resolve()}),(0,m.default)(n,(0,l.default)("REPORT_WEBHOOK")).catch(function(t){return n.warnings.push({title:"Error sending report to "+(0,l.default)("REPORT_WEBHOOK"),message:t}),c.default.resolve()})]).then(function(){return(0,p.default)(t,n)})};var u=n(9),a=r(u),s=n(13),c=r(s),f=n(0),l=r(f),d=n(66),p=r(d),h=n(121),v=r(h),g=n(116),m=r(g),y=function(t){return t?a.default.pickBy(t,function(t){return t.deleted+t.created+t.updated>0}):null}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){if(!n)return a.default.resolve();var r=f(t,e);return new a.default(function(t,e){c.default.post(n).send(r).set("Accept","application/json").end(function(n){return n?e(n):t()})})};var o=n(9),i=r(o),u=n(13),a=r(u),s=n(102),c=r(s),f=function(t,e){var n={username:"auth0-deployments",icon_emoji:":rocket:",attachments:[]},r=i.default.capitalize("visualstudio"),o={fallback:r+" to Auth0 Deployment",text:r+" to Auth0 Deployment",fields:[{title:"Repository",value:t.repository,short:!0},{title:"Branch",value:t.branch,short:!0},{title:"ID",value:t.id,short:!0},{title:"Commit",value:t.sha,short:!0}],error_field:{title:"Error",value:t.error||null,short:!1}},u="(<"+e+"|Details>)",a=o.fields;return t.error?(a.push(o.error_field),n.attachments.push({color:"#F35A00",fallback:o.fallback+" failed: "+(t.error.message||t.error),text:o.text+" failed: "+u,fields:o.fields})):(t.logs&&i.default.forEach(t.logs,function(t,e){i.default.forEach(t,function(t,n){t&&a.push({title:e+" "+n,value:t,short:!0})})}),n.attachments.push({color:"#7CD197",fallback:o.fallback,text:o.fallback+" "+u,fields:a})),n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),i=r(o),u=n(5),a=r(u),s=n(14),c=n(128),f=r(c),l=n(127),d=r(l),p=n(62),h=r(p),v=n(0),g=r(v),m=n(61),y=r(m),_=n(65),b=_.getOptions,E=function(t){return t.read().then(function(t){return t.isNotified=!0,t}).then(function(e){return t.write(e)})};e.default=function(t){var e=new y.default((0,g.default)("CIPHER_PASSWORD")),n=a.default.Router();return n.use(s.middlewares.authenticateAdmins({credentialsRequired:!0,secret:(0,g.default)("EXTENSION_SECRET"),audience:"urn:visualstudio-deploy",baseUrl:(0,g.default)("PUBLIC_WT_URL"),onLoginSuccess:function(t,e,n){n()}})),n.use(s.middlewares.managementApiClient({domain:(0,g.default)("AUTH0_DOMAIN"),clientId:(0,g.default)("AUTH0_CLIENT_ID"),clientSecret:(0,g.default)("AUTH0_CLIENT_SECRET")})),n.use("/rules",(0,f.default)(t)),n.use("/resourceServers",(0,d.default)(t)),n.post("/notified",function(e,n,r){E(t).then(function(){return n.status(204).send()}).catch(r)}),n.get("/config",function(e,n,r){t.read().then(function(n){return n.isNotified?{showNotification:!1,branch:(0,g.default)("BRANCH")||(0,g.default)("PROJECT_PATH"),secret:(0,g.default)("EXTENSION_SECRET"),repository:(0,g.default)("REPOSITORY"),prefix:(0,g.default)("INSTANCE")}:e.auth0.rules.get().then(function(e){var n={showNotification:!1,branch:(0,g.default)("BRANCH")||(0,g.default)("PROJECT_PATH"),secret:(0,g.default)("EXTENSION_SECRET"),repository:(0,g.default)("REPOSITORY"),prefix:(0,g.default)("INSTANCE")};return e&&e.length?n.showNotification=!0:E(t),n})}).then(function(t){return n.json(t)}).catch(r)}),n.get("/deployments",function(e,n,r){return t.read().then(function(t){return n.json(i.default.orderBy(t.deployments||[],["date"],["desc"]))}).catch(r)}),n.post("/deployments",function(e,n,r){return b(e).then(function(n){return(0,h.default)(t,e.auth0,n)}).then(function(t){return n.json(t)}).catch(r)}),n.post("/cipher",function(t,n,r){return e.encrypt(t.body.text).then(function(t){return n.json({result:t})}).catch(r)}),n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=n(1),u=n(14),a=n(0),s=r(a),c=n(15),f=r(c);e.default=function(){var t=(0,o.Router)(),e=u.middlewares.validateHookToken((0,s.default)("AUTH0_DOMAIN"),(0,s.default)("WT_URL"),(0,s.default)("EXTENSION_SECRET"));return t.use("/on-uninstall",e("/.extensions/on-uninstall")),t.delete("/on-uninstall",function(t,e){f.default.debug("Uninstall running...");var n=(0,s.default)("AUTH0_CLIENT_ID"),r={domain:(0,s.default)("AUTH0_DOMAIN"),clientSecret:(0,s.default)("AUTH0_CLIENT_SECRET"),clientId:n};i.managementApi.getClient(r).then(function(t){return t.clients.delete({client_id:n})}).then(function(){f.default.debug("Deleted client "+(0,s.default)("AUTH0_CLIENT_ID")),e.sendStatus(204)}).catch(function(t){f.default.debug("Error deleting client: "+(0,s.default)("AUTH0_CLIENT_ID")),f.default.error(t),e.sendStatus(204)})}),t}},function(t,e,n){"use strict";(function(t){function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(253),i=r(o),u=n(252),a=r(u),s=n(36),c=r(s),f=n(14),l=n(0),d=r(l);e.default=function(){var e='\n  <!DOCTYPE html>\n  <html lang="en">\n  <head>\n    <title>Auth0 - Deployment Extension</title>\n    <meta charset="UTF-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <link rel="shortcut icon" href="https://cdn.auth0.com/styleguide/4.6.13/lib/logos/img/favicon.png">\n    <meta name="viewport" content="width=device-width, initial-scale=1">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styles/zocial.min.css">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/manage/v0.3.1715/css/index.min.css">\n    <link rel="stylesheet" type="text/css" href="https://cdn.auth0.com/styleguide/4.6.13/index.css">\n    <% if (assets.style) { %><link rel="stylesheet" type="text/css" href="/app/<%= assets.style %>"><% } %>\n    <% if (assets.version) { %><link rel="stylesheet" type="text/css" href="//cdn.auth0.com/extensions/auth0-deploy-extensions/assets/auth0-deploy-extensions.ui.<%= assets.version %>.css"><% } %>\n  </head>\n  <body class="a0-extension">\n    <div id="app"></div>\n    <script type="text/javascript" src="//cdn.auth0.com/js/lock-9.0.min.js"><\/script>\n    <script type="text/javascript" src="//cdn.auth0.com/manage/v0.3.1715/js/bundle.js"><\/script>\n    <script type="text/javascript">window.config = <%- JSON.stringify(config) %>;<\/script>\n    <% if (assets.vendors) { %><script type="text/javascript" src="/app/<%= assets.vendors %>"><\/script><% } %>\n    <% if (assets.app) { %><script type="text/javascript" src="//localhost:3000/app/<%= assets.app %>"><\/script><% } %>\n    <% if (assets.version) { %>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-deploy-extensions/assets/auth0-deploy-extensions.ui.vendors.<%= assets.version %>.js"><\/script>\n    <script type="text/javascript" src="//cdn.auth0.com/extensions/auth0-deploy-extensions/assets/auth0-deploy-extensions.ui.<%= assets.version %>.js"><\/script>\n    <% } %>\n  </body>\n  </html>\n  ';return function(n,r){var o={AUTH0_DOMAIN:(0,d.default)("AUTH0_DOMAIN"),BASE_URL:f.urlHelpers.getBaseUrl(n),BASE_PATH:f.urlHelpers.getBasePath(n),AUTH0_MANAGE_URL:(0,d.default)("AUTH0_MANAGE_URL")||"http://manage.auth0.com",A0EXT_PROVIDER:"visualstudio",ENABLE_CIPHER:!0===(0,d.default)("ENABLE_CIPHER")||"true"===(0,d.default)("ENABLE_CIPHER")},u={default:"1.2.0"}&&({default:"1.2.0"}.visualstudio||{default:"1.2.0"}.default);return u?r.send(a.default.render(e,{config:o,assets:{version:u}})):i.default.readFile(c.default.join(t,"../../dist/manifest.json"),"utf8",function(t,n){var i={config:o,assets:{app:"bundle.js"}};!t&&n&&(i.assets=JSON.parse(n)),r.send(a.default.render(e,i))})}}}).call(e,"/")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=n(122),u=r(i),a=n(124),s=r(a),c=n(126),f=r(c),l=n(123),d=r(l),p=n(129),h=r(p);e.default=function(t){var e=(0,o.Router)();return e.use("/.extensions",(0,d.default)()),e.get("/",(0,s.default)()),e.use("/meta",(0,f.default)()),e.use("/webhooks",(0,h.default)(t)),e.use("/api",(0,u.default)(t)),e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=r(o),u=n(187),a=r(u);e.default=function(){var t=i.default.Router();return t.get("/",function(t,e){e.status(200).send(a.default)}),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),i=r(o),u=n(5),a=r(u);e.default=function(t){var e=a.default.Router();return e.get("/",function(e,n,r){e.auth0.resourceServers.get().then(function(e){t.read().then(function(t){var r={},o=i.default.filter(e,function(t){return!t.is_system});t&&t.excluded_resource_servers?i.default.forEach(o,function(e){r[e.name]=t.excluded_resource_servers.indexOf(e.name)>=0}):i.default.forEach(o,function(t){r[t.name]=!1}),n.json(r)}).catch(r)}).catch(r)}),e.post("/",function(e,n,r){var o=e.body.names||[];t.read().then(function(t){return t.excluded_resource_servers=o,t.excluded_resource_servers=o,t}).then(function(e){return t.write(e)}).then(function(){return n.status(200).send()}).catch(r)}),e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(9),i=r(o),u=n(5),a=r(u);e.default=function(t){var e=a.default.Router();return e.get("/",function(e,n,r){e.auth0.rules.get().then(function(e){t.read().then(function(t){var r={};t&&t.excluded_rules?i.default.forEach(e,function(e){r[e.name]=t.excluded_rules.indexOf(e.name)>=0}):i.default.forEach(e,function(t){r[t.name]=!1}),n.json(r)}).catch(r)}).catch(r)}),e.post("/",function(e,n,r){var o=e.body.names||[];t.read().then(function(t){return t.excluded_rules=o,t}).then(function(e){return t.write(e)}).then(function(){return n.status(201).send()}).catch(r)}),e}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=r(o),u=n(14),a=n(0),s=r(a),c=n(62),f=r(c),l=n(119);e.default=function(t){var e=i.default.Router();return e.use(u.middlewares.managementApiClient({domain:(0,s.default)("AUTH0_DOMAIN"),clientId:(0,s.default)("AUTH0_CLIENT_ID"),clientSecret:(0,s.default)("AUTH0_CLIENT_SECRET")})),e.post("/deploy/:secret?",l(),function(e,n){return n.status(202).json({message:"Request accepted, deployment started."}),(0,f.default)(t,e.auth0,e.webhook)}),e}},function(t,e,n){"use strict";var r=n(14),o=n(104),i=n(0),u=n(15),a=r.createServer(function(t,e){return u.info("Starting Bitbucket Deploy extension - Version:","2.6.0"),o(t,e)});t.exports=function(t,e,n){e.x_wt&&e.x_wt.ectx&&e.x_wt.ectx.PUBLIC_WT_URL||!1||i.setValue("PUBLIC_WT_URL",r.urlHelpers.getWebtaskUrl(e)),a(t,e,n)}},function(t,e,n){t.exports={default:n(142),__esModule:!0}},function(t,e,n){t.exports={default:n(143),__esModule:!0}},function(t,e,n){t.exports={default:n(145),__esModule:!0}},function(t,e,n){t.exports={default:n(146),__esModule:!0}},function(t,e,n){t.exports={default:n(149),__esModule:!0}},function(t,e,n){t.exports={default:n(150),__esModule:!0}},function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(134),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var o=n(136),i=r(o),u=n(135),a=r(u),s="function"==typeof a.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};e.default="function"==typeof a.default&&"symbol"===s(i.default)?function(t){return void 0===t?"undefined":s(t)}:function(t){return t&&"function"==typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":void 0===t?"undefined":s(t)}},function(t,e,n){"use strict";function r(t,e){return function(n,r,o){if(n.cookies)return o();var u=n.headers.cookie,c=!t||Array.isArray(t)?t||[]:[t];if(n.secret=c[0],n.cookies=Object.create(null),n.signedCookies=Object.create(null),!u)return o();n.cookies=s.parse(u,e),0!==c.length&&(n.signedCookies=a(n.cookies,c),n.signedCookies=i(n.signedCookies)),n.cookies=i(n.cookies),o()}}function o(t){if("string"==typeof t&&"j:"===t.substr(0,2))try{return JSON.parse(t.slice(2))}catch(t){return}}function i(t){for(var e,n,r=Object.keys(t),i=0;i<r.length;i++)e=r[i],(n=o(t[e]))&&(t[e]=n);return t}function u(t,e){if("string"==typeof t){if("s:"!==t.substr(0,2))return t;for(var n=!e||Array.isArray(e)?e||[]:[e],r=0;r<n.length;r++){var o=c.unsign(t.slice(2),n[r]);if(!1!==o)return o}return!1}}function a(t,e){for(var n,r,o,i=Object.keys(t),a=Object.create(null),s=0;s<i.length;s++)r=i[s],o=t[r],n=u(o,e),o!==n&&(a[r]=n,delete t[r]);return a}var s=n(141),c=n(250);t.exports=r,t.exports.JSONCookie=o,t.exports.JSONCookies=i,t.exports.signedCookie=u,t.exports.signedCookies=a},function(t,e,n){"use strict";function r(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");for(var n={},r=e||{},o=t.split(s),a=r.decode||u,c=0;c<o.length;c++){var f=o[c],l=f.indexOf("=");if(!(l<0)){var d=f.substr(0,l).trim(),p=f.substr(++l,f.length).trim();'"'==p[0]&&(p=p.slice(1,-1)),void 0==n[d]&&(n[d]=i(p,a))}}return n}function o(t,e,n){var r=n||{},o=r.encode||a;if("function"!=typeof o)throw new TypeError("option encode is invalid");if(!c.test(t))throw new TypeError("argument name is invalid");var i=o(e);if(i&&!c.test(i))throw new TypeError("argument val is invalid");var u=t+"="+i;if(null!=r.maxAge){var s=r.maxAge-0;if(isNaN(s))throw new Error("maxAge should be a Number");u+="; Max-Age="+Math.floor(s)}if(r.domain){if(!c.test(r.domain))throw new TypeError("option domain is invalid");u+="; Domain="+r.domain}if(r.path){if(!c.test(r.path))throw new TypeError("option path is invalid");u+="; Path="+r.path}if(r.expires){if("function"!=typeof r.expires.toUTCString)throw new TypeError("option expires is invalid");u+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(u+="; HttpOnly"),r.secure&&(u+="; Secure"),r.sameSite){switch("string"==typeof r.sameSite?r.sameSite.toLowerCase():r.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;default:throw new TypeError("option sameSite is invalid")}}return u}function i(t,e){try{return e(t)}catch(e){return t}}e.parse=r,e.serialize=o;var u=decodeURIComponent,a=encodeURIComponent,s=/; */,c=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},function(t,e,n){n(31),n(30),t.exports=n(177)},function(t,e,n){n(31),n(30),t.exports=n(178)},function(t,e,n){var r=n(2),o=r.JSON||(r.JSON={stringify:JSON.stringify});t.exports=function(t){return o.stringify.apply(o,arguments)}},function(t,e,n){n(180),t.exports=n(2).Object.assign},function(t,e,n){n(181);var r=n(2).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){n(182),t.exports=n(2).Object.keys},function(t,e,n){n(83),n(30),n(31),n(183),t.exports=n(2).Promise},function(t,e,n){n(184),n(83),n(185),n(186),t.exports=n(2).Symbol},function(t,e,n){n(30),n(31),t.exports=n(50).f("iterator")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(12),o=n(81),i=n(176);t.exports=function(t){return function(e,n,u){var a,s=r(e),c=o(s.length),f=i(u,c);if(t&&n!=n){for(;c>f;)if((a=s[f++])!=a)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(19),o=n(43),i=n(26);t.exports=function(t){var e=r(t),n=o.f;if(n)for(var u,a=n(t),s=i.f,c=0;a.length>c;)s.call(t,u=a[c++])&&e.push(u);return e}},function(t,e,n){var r=n(24),o=n(159),i=n(157),u=n(6),a=n(81),s=n(82),c={},f={},e=t.exports=function(t,e,n,l,d){var p,h,v,g,m=d?function(){return t}:s(t),y=r(n,l,e?2:1),_=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(i(m)){for(p=a(t.length);p>_;_++)if((g=e?y(u(h=t[_])[0],h[1]):y(t[_]))===c||g===f)return g}else for(v=m.call(t);!(h=v.next()).done;)if((g=o(v,y,h.value,e))===c||g===f)return g};e.BREAK=c,e.RETURN=f},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(18),o=n(3)("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||i[o]===t)}},function(t,e,n){var r=n(20);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(6);t.exports=function(t,e,n,o){try{return o?e(r(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&r(i.call(t)),e}}},function(t,e,n){"use strict";var r=n(76),o=n(27),i=n(28),u={};n(11)(u,n(3)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(u,{next:o(1,n)}),i(t,e+" Iterator")}},function(t,e,n){var r=n(3)("iterator"),o=!1;try{var i=[7][r]();i.return=function(){o=!0},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i=[7],u=i[r]();u.next=function(){return{done:n=!0}},i[r]=function(){return u},t(i)}catch(t){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(19),o=n(12);t.exports=function(t,e){for(var n,i=o(t),u=r(i),a=u.length,s=0;a>s;)if(i[n=u[s++]]===e)return n}},function(t,e,n){var r=n(29)("meta"),o=n(21),i=n(10),u=n(8).f,a=0,s=Object.isExtensible||function(){return!0},c=!n(17)(function(){return s(Object.preventExtensions({}))}),f=function(t){u(t,r,{value:{i:"O"+ ++a,w:{}}})},l=function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},d=function(t,e){if(!i(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},p=function(t){return c&&h.NEED&&s(t)&&!i(t,r)&&f(t),t},h=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:d,onFreeze:p}},function(t,e,n){var r=n(4),o=n(80).set,i=r.MutationObserver||r.WebKitMutationObserver,u=r.process,a=r.Promise,s="process"==n(20)(u);t.exports=function(){var t,e,n,c=function(){var r,o;for(s&&(r=u.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(s)n=function(){u.nextTick(c)};else if(i){var f=!0,l=document.createTextNode("");new i(c).observe(l,{characterData:!0}),n=function(){l.data=f=!f}}else if(a&&a.resolve){var d=a.resolve();n=function(){d.then(c)}}else n=function(){o.call(r,c)};return function(r){var o={fn:r,next:void 0};e&&(e.next=o),t||(t=o,n()),e=o}}},function(t,e,n){"use strict";var r=n(19),o=n(43),i=n(26),u=n(47),a=n(74),s=Object.assign;t.exports=!s||n(17)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=u(t),s=arguments.length,c=1,f=o.f,l=i.f;s>c;)for(var d,p=a(arguments[c++]),h=f?r(p).concat(f(p)):r(p),v=h.length,g=0;v>g;)l.call(p,d=h[g++])&&(n[d]=p[d]);return n}:s},function(t,e,n){var r=n(8),o=n(6),i=n(19);t.exports=n(7)?Object.defineProperties:function(t,e){o(t);for(var n,u=i(e),a=u.length,s=0;a>s;)r.f(t,n=u[s++],e[n]);return t}},function(t,e,n){var r=n(26),o=n(27),i=n(12),u=n(48),a=n(10),s=n(73),c=Object.getOwnPropertyDescriptor;e.f=n(7)?c:function(t,e){if(t=i(t),e=u(e,!0),s)try{return c(t,e)}catch(t){}if(a(t,e))return o(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(12),o=n(77).f,i={}.toString,u="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return o(t)}catch(t){return u.slice()}};t.exports.f=function(t){return u&&"[object Window]"==i.call(t)?a(t):o(r(t))}},function(t,e,n){var r=n(10),o=n(47),i=n(44)("IE_PROTO"),u=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=o(t),r(t,i)?t[i]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?u:null}},function(t,e,n){var r=n(16),o=n(2),i=n(17);t.exports=function(t,e){var n=(o.Object||{})[t]||Object[t],u={};u[t]=e(n),r(r.S+r.F*i(function(){n(1)}),"Object",u)}},function(t,e,n){var r=n(11);t.exports=function(t,e,n){for(var o in e)n&&t[o]?t[o]=e[o]:r(t,o,e[o]);return t}},function(t,e,n){"use strict";var r=n(4),o=n(2),i=n(8),u=n(7),a=n(3)("species");t.exports=function(t){var e="function"==typeof o[t]?o[t]:r[t];u&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(6),o=n(38),i=n(3)("species");t.exports=function(t,e){var n,u=r(t).constructor;return void 0===u||void 0==(n=r(u)[i])?e:o(n)}},function(t,e,n){var r=n(46),o=n(40);t.exports=function(t){return function(e,n){var i,u,a=String(o(e)),s=r(n),c=a.length;return s<0||s>=c?t?"":void 0:(i=a.charCodeAt(s),i<55296||i>56319||s+1===c||(u=a.charCodeAt(s+1))<56320||u>57343?t?a.charAt(s):i:t?a.slice(s,s+2):u-56320+(i-55296<<10)+65536)}}},function(t,e,n){var r=n(46),o=Math.max,i=Math.min;t.exports=function(t,e){return t=r(t),t<0?o(t+e,0):i(t,e)}},function(t,e,n){var r=n(6),o=n(82);t.exports=n(2).getIterator=function(t){var e=o(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(39),o=n(3)("iterator"),i=n(18);t.exports=n(2).isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||i.hasOwnProperty(r(e))}},function(t,e,n){"use strict";var r=n(151),o=n(162),i=n(18),u=n(12);t.exports=n(75)(Array,"Array",function(t,e){this._t=u(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,o(1)):"keys"==e?o(0,n):"values"==e?o(0,t[n]):o(0,[n,t[n]])},"values"),i.Arguments=i.Array,r("keys"),r("values"),r("entries")},function(t,e,n){var r=n(16);r(r.S+r.F,"Object",{assign:n(166)})},function(t,e,n){var r=n(16);r(r.S+r.F*!n(7),"Object",{defineProperty:n(8).f})},function(t,e,n){var r=n(47),o=n(19);n(171)("keys",function(){return function(t){return o(r(t))}})},function(t,e,n){"use strict";var r,o,i,u=n(25),a=n(4),s=n(24),c=n(39),f=n(16),l=n(21),d=n(38),p=n(152),h=n(155),v=n(174),g=n(80).set,m=n(165)(),y=a.TypeError,_=a.process,b=a.Promise,_=a.process,E="process"==c(_),x=function(){},w=!!function(){try{var t=b.resolve(1),e=(t.constructor={})[n(3)("species")]=function(t){t(x,x)};return(E||"function"==typeof PromiseRejectionEvent)&&t.then(x)instanceof e}catch(t){}}(),S=function(t,e){return t===e||t===b&&e===i},T=function(t){var e;return!(!l(t)||"function"!=typeof(e=t.then))&&e},O=function(t){return S(b,t)?new k(t):new o(t)},k=o=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw y("Bad Promise constructor");e=t,n=r}),this.resolve=d(e),this.reject=d(n)},j=function(t){try{t()}catch(t){return{error:t}}},A=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,o=1==t._s,i=0;n.length>i;)!function(e){var n,i,u=o?e.ok:e.fail,a=e.resolve,s=e.reject,c=e.domain;try{u?(o||(2==t._h&&I(t),t._h=1),!0===u?n=r:(c&&c.enter(),n=u(r),c&&c.exit()),n===e.promise?s(y("Promise-chain cycle")):(i=T(n))?i.call(n,a,s):a(n)):s(r)}catch(t){s(t)}}(n[i++]);t._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){g.call(a,function(){var e,n,r,o=t._v;if(C(t)&&(e=j(function(){E?_.emit("unhandledRejection",o,t):(n=a.onunhandledrejection)?n({promise:t,reason:o}):(r=a.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=E||C(t)?2:1),t._a=void 0,e)throw e.error})},C=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!C(e.promise))return!1;return!0},I=function(t){g.call(a,function(){var e;E?_.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},P=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),A(e,!0))},N=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw y("Promise can't be resolved itself");(e=T(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,s(N,r,1),s(P,r,1))}catch(t){P.call(r,t)}}):(n._v=t,n._s=1,A(n,!1))}catch(t){P.call({_w:n,_d:!1},t)}}};w||(b=function(t){p(this,b,"Promise","_h"),d(t),r.call(this);try{t(s(N,this,1),s(P,this,1))}catch(t){P.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(172)(b.prototype,{then:function(t,e){var n=O(v(this,b));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=E?_.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&A(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),k=function(){var t=new r;this.promise=t,this.resolve=s(N,t,1),this.reject=s(P,t,1)}),f(f.G+f.W+f.F*!w,{Promise:b}),n(28)(b,"Promise"),n(173)("Promise"),i=n(2).Promise,f(f.S+f.F*!w,"Promise",{reject:function(t){var e=O(this);return(0,e.reject)(t),e.promise}}),f(f.S+f.F*(u||!w),"Promise",{resolve:function(t){if(t instanceof b&&S(t.constructor,this))return t;var e=O(this);return(0,e.resolve)(t),e.promise}}),f(f.S+f.F*!(w&&n(161)(function(t){b.all(t).catch(x)})),"Promise",{all:function(t){var e=this,n=O(e),r=n.resolve,o=n.reject,i=j(function(){var n=[],i=0,u=1;h(t,!1,function(t){var a=i++,s=!1;n.push(void 0),u++,e.resolve(t).then(function(t){s||(s=!0,n[a]=t,--u||r(n))},o)}),--u||r(n)});return i&&o(i.error),n.promise},race:function(t){var e=this,n=O(e),r=n.reject,o=j(function(){h(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o&&r(o.error),n.promise}})},function(t,e,n){"use strict";var r=n(4),o=n(10),i=n(7),u=n(16),a=n(79),s=n(164).KEY,c=n(17),f=n(45),l=n(28),d=n(29),p=n(3),h=n(50),v=n(49),g=n(163),m=n(154),y=n(158),_=n(6),b=n(12),E=n(48),x=n(27),w=n(76),S=n(169),T=n(168),O=n(8),k=n(19),j=T.f,A=O.f,R=S.f,C=r.Symbol,I=r.JSON,P=I&&I.stringify,N=p("_hidden"),M=p("toPrimitive"),U={}.propertyIsEnumerable,F=f("symbol-registry"),D=f("symbols"),L=f("op-symbols"),B=Object.prototype,H="function"==typeof C,K=r.QObject,q=!K||!K.prototype||!K.prototype.findChild,J=i&&c(function(){return 7!=w(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=j(B,e);r&&delete B[e],A(t,e,n),r&&t!==B&&A(B,e,r)}:A,Y=function(t){var e=D[t]=w(C.prototype);return e._k=t,e},W=H&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},z=function(t,e,n){return t===B&&z(L,e,n),_(t),e=E(e,!0),_(n),o(D,e)?(n.enumerable?(o(t,N)&&t[N][e]&&(t[N][e]=!1),n=w(n,{enumerable:x(0,!1)})):(o(t,N)||A(t,N,x(1,{})),t[N][e]=!0),J(t,e,n)):A(t,e,n)},G=function(t,e){_(t);for(var n,r=m(e=b(e)),o=0,i=r.length;i>o;)z(t,n=r[o++],e[n]);return t},$=function(t,e){return void 0===e?w(t):G(w(t),e)},V=function(t){var e=U.call(this,t=E(t,!0));return!(this===B&&o(D,t)&&!o(L,t))&&(!(e||!o(this,t)||!o(D,t)||o(this,N)&&this[N][t])||e)},X=function(t,e){if(t=b(t),e=E(e,!0),t!==B||!o(D,e)||o(L,e)){var n=j(t,e);return!n||!o(D,e)||o(t,N)&&t[N][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=R(b(t)),r=[],i=0;n.length>i;)o(D,e=n[i++])||e==N||e==s||r.push(e);return r},Z=function(t){for(var e,n=t===B,r=R(n?L:b(t)),i=[],u=0;r.length>u;)!o(D,e=r[u++])||n&&!o(B,e)||i.push(D[e]);return i};H||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===B&&e.call(L,n),o(this,N)&&o(this[N],t)&&(this[N][t]=!1),J(this,t,x(1,n))};return i&&q&&J(B,t,{configurable:!0,set:e}),Y(t)},a(C.prototype,"toString",function(){return this._k}),T.f=X,O.f=z,n(77).f=S.f=Q,n(26).f=V,n(43).f=Z,i&&!n(25)&&a(B,"propertyIsEnumerable",V,!0),h.f=function(t){return Y(p(t))}),u(u.G+u.W+u.F*!H,{Symbol:C});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var tt=k(p.store),et=0;tt.length>et;)v(tt[et++]);u(u.S+u.F*!H,"Symbol",{for:function(t){return o(F,t+="")?F[t]:F[t]=C(t)},keyFor:function(t){if(W(t))return g(F,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){q=!0},useSimple:function(){q=!1}}),u(u.S+u.F*!H,"Object",{create:$,defineProperty:z,defineProperties:G,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),I&&u(u.S+u.F*(!H||c(function(){var t=C();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!W(t)){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);return e=r[1],"function"==typeof e&&(n=e),!n&&y(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!W(e))return e}),r[1]=e,P.apply(I,r)}}}),C.prototype[M]||n(11)(C.prototype,M,C.prototype.valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e,n){n(49)("asyncIterator")},function(t,e,n){n(49)("observable")},function(t,e){t.exports={title:"Visual Studio Team Services Deployments",name:"auth0-visualstudio-deploy",version:"2.6.0",preVersion:"2.5.3",author:"auth0",description:"This extension gives Auth0 customers the possibility to deploy Hosted Pages, Rules and Custom Database Connections from Visual Studio Team Services.",type:"application",category:"source_control",docsUrl:"https://auth0.com/docs/extensions/visual-studio-team-services-deploy",logoUrl:"https://cdn.auth0.com/extensions/auth0-visualstudio-deploy/assets/logo.svg",initialUrlPath:"/admins/login",uninstallConfirmMessage:"Do you really want to uninstall this extension? Doing so will stop any Hosted Pages, Rules and Database Connection scripts from being deployed from Visual Studio Team Services to Auth0",repository:"https://github.com/auth0-extensions/auth0-visualstudio-deploy",keywords:["auth0","extension","visualstudio"],auth0:{createClient:!0,onUninstallPath:"/.extensions/on-uninstall",scopes:"read:client_grants create:client_grants delete:client_grants update:client_grants read:clients update:clients delete:clients create:clients read:client_keys update:client_keys delete:client_keys create:client_keys read:connections update:connections delete:connections create:connections read:resource_servers update:resource_servers delete:resource_servers create:resource_servers read:rules update:rules delete:rules create:rules read:rules_configs update:rules_configs delete:rules_configs read:email_provider update:email_provider delete:email_provider create:email_provider read:tenant_settings update:tenant_settings read:grants delete:grants read:guardian_factors update:guardian_factors read:email_templates create:email_templates update:email_templates"},secrets:{TYPE:{description:"Type of repository",type:"select",required:!0,default:"git",allowMultiple:!1,options:[{value:"git",text:"Git"},{value:"tfvc",text:"TFVC"}]},REPOSITORY:{example:"MyFirstProject",description:"The project from which you want to deploy rules and database scripts",required:!0},BRANCH:{description:"The branch we should monitor for commits",default:"master",required:!0,visibleIf:{TYPE:"git"}},PATH:{example:"$/myproject/somepath",description:"The path we should monitor for commits",visibleIf:{TYPE:"tfvc"}},INSTANCE:{example:"INSTANCE.visualstudio.com",description:"Your Visual Studio Team Services instance name (without .visualstudio.com)",required:!0},COLLECTION:{description:"Your visualstudio collection",default:"DefaultCollection",required:!0},USERNAME:{description:"Your Visual Studio Team Services username",required:!0},AUTH_METHOD:{description:"You can choose between PAT and Basic (Alternate authentication credentials)",required:!0,type:"select",default:"pat",allowMultiple:!1,options:[{value:"pat",text:"Personal Access Token"},{value:"basic",text:"Basic"}]},PASSWORD:{description:"Your Visual Studio password (Alternate authentication credentials)",required:!0,type:"password",visibleIf:{AUTH_METHOD:"basic"}},TOKEN:{description:"Your personal access token for Visual Studio Team Services",required:!0,type:"password",visibleIf:{AUTH_METHOD:"pat"}},BASE_DIR:{example:"settings/tenant",description:"Path to your tenant settings directories",visibleIf:{TYPE:"git"}},ENABLE_CIPHER:{description:"Enables support of encrypted secrets",type:"select",required:!0,default:"false",allowMultiple:!1,options:[{value:"false",text:"No"},{value:"true",text:"Yes"}]},CIPHER_PASSWORD:{required:!0,description:"Password for encode/decode secrets",visibleIf:{ENABLE_CIPHER:"true"}},SLACK_INCOMING_WEBHOOK_URL:{example:"https://hooks.slack.com/services/...",description:"Webhook URL for Slack used to notify you of successful and failed deployments",required:!1}}}},function(t,e,n){"use strict";var r=n(32),o=n(33),i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(o),u=n(190),a=n(189),s=n(191);t.exports=function(t){return new r.JwksClient(t)},t.exports.ArgumentError=i.ArgumentError,t.exports.JwksError=i.JwksError,t.exports.JwksRateLimitError=i.JwksRateLimitError,t.exports.SigningKeyNotFoundError=i.SigningKeyNotFoundError,t.exports.expressJwtSecret=a.expressJwtSecret,t.exports.hapiJwt2Key=u.hapiJwt2Key,t.exports.hapiJwt2KeyAsync=u.hapiJwt2KeyAsync,t.exports.koaJwtSecret=s.koaJwtSecret},function(t,e,n){"use strict";var r=n(33),o=n(32),i=function(t,e){return t&&"SigningKeyNotFoundError"===t.name?e(null):t?e(t):void 0};t.exports.expressJwtSecret=function(t){if(null===t||void 0===t)throw new r.ArgumentError("An options object must be provided when initializing expressJwtSecret");var e=new o.JwksClient(t),n=t.handleSigningKeyError||i;return function(t,r,o,i){if(!r||"RS256"!==r.alg)return i(null,null);e.getSigningKey(r.kid,function(t,e){return t?n(t,function(t){return i(t,null)}):i(null,e.publicKey||e.rsaPublicKey)})}}},function(t,e,n){"use strict";var r=n(33),o=n(32),i=function(t,e){return t&&"SigningKeyNotFoundError"===t.name?e(null,null,null):t?e(t,null,null):void 0};t.exports.hapiJwt2KeyAsync=function(e){var n=t.exports.hapiJwt2Key(e);return function(t){return new Promise(function(e,r){n(t,function(t,n){!n||t?r(t):e({key:n})})})}},t.exports.hapiJwt2Key=function(t){if(null===t||void 0===t)throw new r.ArgumentError("An options object must be provided when initializing hapiJwt2Key");var e=new o.JwksClient(t),n=t.handleSigningKeyError||i;return function(t,r){return t&&t.header?"RS256"!==t.header.alg?r(null,null,null):void e.getSigningKey(t.header.kid,function(t,e){return t?n(t,function(t){return r(t,null,null)}):r(null,e.publicKey||e.rsaPublicKey,e)}):r(null,null,null)}}},function(t,e,n){"use strict";var r=n(33),o=n(32);t.exports.koaJwtSecret=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.jwksUri)throw new r.ArgumentError("No JWKS URI provided");var e=new o.JwksClient(t);return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.alg,o=n.kid;return new Promise(function(n,i){if("RS256"!==r)return i(new Error("Missing / invalid token algorithm"));e.getSigningKey(o,function(e,r){if(e)return t.handleSigningKeyError?t.handleSigningKeyError(e).then(i):i(e);n(r.publicKey||r.rsaPublicKey)})})}}},function(t,e,n){"use strict";function r(t){return t=t.match(/.{1,64}/g).join("\n"),t="-----BEGIN CERTIFICATE-----\n"+t+"\n-----END CERTIFICATE-----\n"}function o(t){var e=t[0];return e<"0"||e>"7"?"00"+t:t}function i(t){var e=t.toString(16);return e.length%2?"0"+e:e}function u(t){if(t<=127)return i(t);var e=i(t);return i(128+e.length/2)+e}function a(t,e){var n=new Buffer(t,"base64"),r=new Buffer(e,"base64"),i=o(n.toString("hex")),a=o(r.toString("hex")),s=i.length/2,c=a.length/2,f=u(s),l=u(c),d="30"+u(s+c+f.length/2+l.length/2+2)+"02"+f+i+"02"+l+a,p=new Buffer(d,"hex").toString("base64"),h="-----BEGIN RSA PUBLIC KEY-----\n";return h+=""+p.match(/.{1,64}/g).join("\n"),h+="\n-----END RSA PUBLIC KEY-----\n"}Object.defineProperty(e,"__esModule",{value:!0}),e.certToPEM=r,e.rsaPublicKeyToPEM=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:options,n=e.cacheMaxEntries,r=void 0===n?5:n,o=e.cacheMaxAge,u=void 0===o?(0,i.default)("10h"):o,s=(0,a.default)("jwks"),f=t.getSigningKey;return s("Configured caching of singing keys. Max: "+r+" / Age: "+u),(0,c.default)({load:function(t,e){f(t,function(n,r){return n?e(n):(s("Caching signing key for '"+t+"':",r),e(null,r))})},hash:function(t){return t},maxAge:u,max:r})};var o=n(257),i=r(o),u=n(57),a=r(u),s=n(255),c=r(s)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.rateLimitSigningKey=e.cacheSigningKey=void 0;var o=n(193),i=r(o),u=n(195),a=r(u);e.cacheSigningKey=i.default,e.rateLimitSigningKey=a.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:options,n=e.jwksRequestsPerMinute,r=void 0===n?10:n,o=(0,i.default)("jwks"),a=t.getSigningKey,c=new u.RateLimiter(r,"minute",!0);return o("Configured rate limiting to JWKS endpoint at "+r+"/minute"),function(t,e){c.removeTokens(1,function(n,r){return n?e(n):(o("Requests to the JWKS endpoint available for the next minute:",r),r<0?(o("Too many requests to the JWKS endpoint"),e(new s.default("Too many requests to the JWKS endpoint"))):a(t,e))})}};var o=n(57),i=r(o),u=n(198),a=n(86),s=r(a)},function(t,e){function n(t){this.message=t}function r(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,u=0,a=0,s="";i=e.charAt(a++);~i&&(r=u%4?64*r+i:i,u++%4)?s+=String.fromCharCode(255&r>>(-2*u&6)):0)i=o.indexOf(i);return s}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.prototype=new Error,n.prototype.name="InvalidCharacterError",t.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||r},function(t,e,n){function r(t){return decodeURIComponent(o(t).replace(/(.)/g,function(t,e){var n=e.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}var o=n(196);t.exports=function(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return r(e)}catch(t){return o(e)}}},function(t,e,n){e.RateLimiter=n(200),e.TokenBucket=n(89)},function(t,e){var n=function(){if("undefined"!=typeof process&&process.hrtime){var t=process.hrtime(),e=t[0],n=t[1];return 1e3*e+Math.floor(n/1e6)}return(new Date).getTime()};t.exports=n},function(t,e,n){var r=n(89),o=n(199),i=function(t,e,n){this.tokenBucket=new r(t,t,e,null),this.tokenBucket.content=t,this.curIntervalStart=o(),this.tokensThisInterval=0,this.fireImmediately=n};i.prototype={tokenBucket:null,curIntervalStart:0,tokensThisInterval:0,fireImmediately:!1,removeTokens:function(t,e){function n(n,o){if(n)return e(n,null);r.tokensThisInterval+=t,e(null,o)}if(t>this.tokenBucket.bucketSize)return process.nextTick(e.bind(null,"Requested tokens "+t+" exceeds maximum tokens per interval "+this.tokenBucket.bucketSize,null)),!1;var r=this,i=o();if((i<this.curIntervalStart||i-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=i,this.tokensThisInterval=0),t>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)process.nextTick(e.bind(null,null,-1));else{var u=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-i);setTimeout(function(){r.tokenBucket.removeTokens(t,n)},u)}return!1}return this.tokenBucket.removeTokens(t,n)},tryRemoveTokens:function(t){if(t>this.tokenBucket.bucketSize)return!1;var e=o();if((e<this.curIntervalStart||e-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=e,this.tokensThisInterval=0),t>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;var n=this.tokenBucket.tryRemoveTokens(t);return n&&(this.tokensThisInterval+=t),n},getTokensRemaining:function(){return this.tokenBucket.drip(),this.tokenBucket.content}},t.exports=i},function(t,e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}t.exports=n},function(t,e){function n(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}t.exports=n},function(t,e,n){function r(t,e){var n=u(t),r=!n&&i(t),f=!n&&!r&&a(t),d=!n&&!r&&!f&&c(t),p=n||r||f||d,h=p?o(t.length,String):[],v=h.length;for(var g in t)!e&&!l.call(t,g)||p&&("length"==g||f&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,v))||h.push(g);return h}var o=n(213),i=n(237),u=n(53),a=n(238),s=n(95),c=n(241),f=Object.prototype,l=f.hasOwnProperty;t.exports=r},function(t,e,n){var r=n(206),o=n(219),i=o(r);t.exports=i},function(t,e,n){var r=n(220),o=r();t.exports=o},function(t,e,n){function r(t,e){return t&&o(t,e,i)}var o=n(205),i=n(56);t.exports=r},function(t,e,n){function r(t){return i(t)&&o(t)==u}var o=n(22),i=n(23),u="[object Arguments]";t.exports=r},function(t,e,n){function r(t){return!(!u(t)||i(t))&&(o(t)?h:c).test(a(t))}var o=n(54),i=n(226),u=n(55),a=n(233),s=/[\\^$.*+?()[\]{}|]/g,c=/^\[object .+?Constructor\]$/,f=Function.prototype,l=Object.prototype,d=f.toString,p=l.hasOwnProperty,h=RegExp("^"+d.call(p).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=r},function(t,e,n){function r(t){return u(t)&&i(t.length)&&!!a[o(t)]}var o=n(22),i=n(99),u=n(23),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=r},function(t,e,n){function r(t){if(!o(t))return i(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}var o=n(96),i=n(227),u=Object.prototype,a=u.hasOwnProperty;t.exports=r},function(t,e,n){function r(t,e){return u(i(t,e,o),t+"")}var o=n(52),i=n(230),u=n(231);t.exports=r},function(t,e,n){var r=n(235),o=n(93),i=n(52),u=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:r(e),writable:!0})}:i;t.exports=u},function(t,e){function n(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}t.exports=n},function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},function(t,e,n){function r(t){return"function"==typeof t?t:o}var o=n(52);t.exports=r},function(t,e,n){function r(t,e,n,r){var u=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var c=e[a],f=r?r(n[c],t[c],c,n,t):void 0;void 0===f&&(f=t[c]),u?i(n,c,f):o(n,c,f)}return n}var o=n(91),i=n(92);t.exports=r},function(t,e,n){var r=n(51),o=r["__core-js_shared__"];t.exports=o},function(t,e,n){function r(t){return o(function(e,n){var r=-1,o=n.length,u=o>1?n[o-1]:void 0,a=o>2?n[2]:void 0;for(u=t.length>3&&"function"==typeof u?(o--,u):void 0,a&&i(n[0],n[1],a)&&(u=o<3?void 0:u,o=1),e=Object(e);++r<o;){var s=n[r];s&&t(e,s,r,u)}return e})}var o=n(211),i=n(225);t.exports=r},function(t,e,n){function r(t,e){return function(n,r){if(null==n)return n;if(!o(n))return t(n,r);for(var i=n.length,u=e?i:-1,a=Object(n);(e?u--:++u<i)&&!1!==r(a[u],u,a););return n}}var o=n(34);t.exports=r},function(t,e){function n(t){return function(e,n,r){for(var o=-1,i=Object(e),u=r(e),a=u.length;a--;){var s=u[t?a:++o];if(!1===n(i[s],s,i))break}return e}}t.exports=n},function(t,e,n){function r(t,e){var n=i(t,e);return o(n)?n:void 0}var o=n(208),i=n(224);t.exports=r},function(t,e,n){var r=n(97),o=r(Object.getPrototypeOf,Object);t.exports=o},function(t,e,n){function r(t){var e=u.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var o=a.call(t);return r&&(e?t[s]=n:delete t[s]),o}var o=n(90),i=Object.prototype,u=i.hasOwnProperty,a=i.toString,s=o?o.toStringTag:void 0;t.exports=r},function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},function(t,e,n){function r(t,e,n){if(!a(n))return!1;var r=typeof e;return!!("number"==r?i(n)&&u(e,n.length):"string"==r&&e in n)&&o(n[e],t)}var o=n(98),i=n(34),u=n(95),a=n(55);t.exports=r},function(t,e,n){function r(t){return!!i&&i in t}var o=n(217),i=function(){var t=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();t.exports=r},function(t,e,n){var r=n(97),o=r(Object.keys,Object);t.exports=o},function(t,e,n){(function(t){var r=n(94),o="object"==typeof e&&e&&!e.nodeType&&e,i=o&&"object"==typeof t&&t&&!t.nodeType&&t,u=i&&i.exports===o,a=u&&r.process,s=function(){try{return a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s}).call(e,n(59)(t))},function(t,e){function n(t){return o.call(t)}var r=Object.prototype,o=r.toString;t.exports=n},function(t,e,n){function r(t,e,n){return e=i(void 0===e?t.length-1:e,0),function(){for(var r=arguments,u=-1,a=i(r.length-e,0),s=Array(a);++u<a;)s[u]=r[e+u];u=-1;for(var c=Array(e+1);++u<e;)c[u]=r[u];return c[e]=n(s),o(t,this,c)}}var o=n(201),i=Math.max;t.exports=r},function(t,e,n){var r=n(212),o=n(232),i=o(r);t.exports=i},function(t,e){function n(t){var e=0,n=0;return function(){var u=i(),a=o-(u-n);if(n=u,a>0){if(++e>=r)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var r=800,o=16,i=Date.now;t.exports=n},function(t,e){function n(t){if(null!=t){try{return o.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var r=Function.prototype,o=r.toString;t.exports=n},function(t,e,n){var r=n(91),o=n(216),i=n(218),u=n(34),a=n(96),s=n(56),c=Object.prototype,f=c.hasOwnProperty,l=i(function(t,e){if(a(e)||u(e))return void o(e,s(e),t);for(var n in e)f.call(e,n)&&r(t,n,e[n])});t.exports=l},function(t,e){function n(t){return function(){return t}}t.exports=n},function(t,e,n){function r(t,e){return(a(t)?o:i)(t,u(e))}var o=n(202),i=n(204),u=n(215),a=n(53);t.exports=r},function(t,e,n){var r=n(207),o=n(23),i=Object.prototype,u=i.hasOwnProperty,a=i.propertyIsEnumerable,s=r(function(){return arguments}())?r:function(t){return o(t)&&u.call(t,"callee")&&!a.call(t,"callee")};t.exports=s},function(t,e,n){(function(t){var r=n(51),o=n(243),i="object"==typeof e&&e&&!e.nodeType&&e,u=i&&"object"==typeof t&&t&&!t.nodeType&&t,a=u&&u.exports===i,s=a?r.Buffer:void 0,c=s?s.isBuffer:void 0,f=c||o;t.exports=f}).call(e,n(59)(t))},function(t,e,n){function r(t){if(!u(t)||o(t)!=a)return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&f.call(n)==d}var o=n(22),i=n(222),u=n(23),a="[object Object]",s=Function.prototype,c=Object.prototype,f=s.toString,l=c.hasOwnProperty,d=f.call(Object);t.exports=r},function(t,e,n){function r(t){return"string"==typeof t||!i(t)&&u(t)&&o(t)==a}var o=n(22),i=n(53),u=n(23),a="[object String]";t.exports=r},function(t,e,n){var r=n(209),o=n(214),i=n(228),u=i&&i.isTypedArray,a=u?o(u):r;t.exports=a},function(t,e){function n(t){return void 0===t}t.exports=n},function(t,e){function n(){return!1}t.exports=n},function(t,e,n){function r(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function o(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}var i=n(261);t.exports=i(r),t.exports.strict=i(o),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},function(t,e,n){"use strict";function r(t,e,n){this.name="RequestError",this.message=String(t),this.cause=t,this.error=t,this.options=e,this.response=n,Error.captureStackTrace&&Error.captureStackTrace(this)}function o(t,e,n,r){this.name="StatusCodeError",this.statusCode=t,this.message=t+" - "+(JSON&&JSON.stringify?JSON.stringify(e):e),this.error=e,this.options=n,this.response=r,Error.captureStackTrace&&Error.captureStackTrace(this)}function i(t,e,n){this.name="TransformError",this.message=String(t),this.cause=t,this.error=t,this.options=e,this.response=n,Error.captureStackTrace&&Error.captureStackTrace(this)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,t.exports={RequestError:r,StatusCodeError:o,TransformError:i}},function(t,e,n){"use strict";function r(t,e,n){var r,o=this,u=!1;if(s(o._rp_callbackOrig))try{o._rp_callbackOrig.apply(o,arguments)}catch(t){u=!0,r=t}if(t?o._rp_reject(new p.RequestError(t,o._rp_options,e)):o._rp_options.simple&&!/^2/.test(""+e.statusCode)?s(o._rp_options.transform)?new i(function(t){t(o._rp_options.transform(n,e,o._rp_options.resolveWithFullResponse))}).then(function(t){o._rp_reject(new p.StatusCodeError(e.statusCode,n,o._rp_options,t))}).catch(function(t){o._rp_reject(new p.TransformError(t,o._rp_options,e))}):o._rp_reject(new p.StatusCodeError(e.statusCode,n,o._rp_options,e)):s(o._rp_options.transform)?new i(function(t){t(o._rp_options.transform(n,e,o._rp_options.resolveWithFullResponse))}).then(function(t){o._rp_resolve(t)}).catch(function(t){o._rp_reject(new p.TransformError(t,o._rp_options,e))}):o._rp_options.resolveWithFullResponse?o._rp_resolve(e):o._rp_resolve(n),u)throw r}function o(t,e){if(e=e||t,!l(h.Request.prototype[e]))throw new Error('Unable to expose method "'+e+'". It is already implemented by Request. Please visit https://github.com/request/request-promise/wiki/Troubleshooting');h.Request.prototype[e]=function(){return this._rp_promise[t].apply(this._rp_promise,arguments)}}var i=n(13),u=n(234),a=n(236),s=n(54),c=n(239),f=n(240),l=n(242),d=n(56),p=n(245),h=function(){function t(){a(d(n.c),function(t){delete n.c[t]})}var e=u({},n.c);t();var r=n(101);return t(),u(n.c,e),r}(),v={HEAD:function(t,e,n){return n?e:e.headers}},g=h.Request.prototype.init;h.Request.prototype.init=function(t){var e=this;return c(t)&&void 0===e._callback&&void 0===e._rp_promise&&(e._rp_promise=new i(function(t,n){e._rp_resolve=t,e._rp_reject=n}),e._rp_callbackOrig=e.callback,e.callback=r,f(t.method)&&(t.method=t.method.toUpperCase()),t.transform=t.transform||v[t.method],e._rp_options=t,e._rp_options.simple=!1!==t.simple,e._rp_options.resolveWithFullResponse=!0===t.resolveWithFullResponse),g.apply(e,arguments)},o("then"),o("catch"),o("finally"),h.Request.prototype.promise=function(){return this._rp_promise},h.bindCLS=function(t){n(!function(){var t=new Error('Cannot find module "cls-bluebird"');throw t.code="MODULE_NOT_FOUND",t}())(t)},t.exports=h},function(t,e,n){var r,o;!function(i,u,a){void 0!==t&&t.exports?t.exports=a():(r=a,void 0!==(o="function"==typeof r?r.call(e,n,e,t):r)&&(t.exports=o))}(0,0,function(){function t(t,e){return t=t.replace(/:\//g,"://"),t=t.replace(/([^:\s])\/+/g,"$1/"),t=t.replace(/\/(\?|&|#[^!])/g,"$1"),t=t.replace(/(\?.+)\?/g,"$1&")}return function(){var e=arguments,n={};return"object"==typeof arguments[0]&&(e=arguments[0],n=arguments[1]||{}),t([].slice.call(e,0).join("/"),n)}})},function(t,e){t.exports=require("auth0-magic@2.3.0")},function(t,e){t.exports=require("body-parser@1.12.4")},function(t,e){t.exports=require("cookie-signature@1.0.6")},function(t,e){t.exports=require("crypto")},function(t,e){t.exports=require("ejs@2.3.1")},function(t,e){t.exports=require("fs")},function(t,e){t.exports=require("jsonwebtoken@7.1.9")},function(t,e){t.exports=require("lru-memoizer@1.10.0")},function(t,e){t.exports=require("morgan@1.5.3")},function(t,e){t.exports=require("ms@0.7.1")},function(t,e){t.exports=require("url")},function(t,e){t.exports=require("webtask-tools")},function(t,e){t.exports=require("winston@1.0.0")},function(t,e){t.exports=require("wrappy@1.0.1")}]);